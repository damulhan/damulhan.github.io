<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>프로그래밍 인 액션</title>
    <meta name="generator" content="VuePress 1.9.9">
    <script async="true" src="https://www.googletagmanager.com/gtag/js?id=G-FZZE483ETN"></script>
    <script>
        window.dataLayer = window.dataLayer || [];
        function gtag(){dataLayer.push(arguments);}
        gtag('js', new Date());

        gtag('config', 'G-FZZE483ETN');
    </script>
    <meta name="description" content="">
    <meta name="theme-color" content="#3eaf7c">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black">
    
    <link rel="preload" href="/assets/css/0.styles.17886239.css" as="style"><link rel="preload" href="/assets/js/app.4a348df6.js" as="script"><link rel="preload" href="/assets/js/8.f8a27090.js" as="script"><link rel="preload" href="/assets/js/71.8cf0b0df.js" as="script"><link rel="prefetch" href="/assets/js/10.90bb7492.js"><link rel="prefetch" href="/assets/js/11.5864f55e.js"><link rel="prefetch" href="/assets/js/12.cd36ae20.js"><link rel="prefetch" href="/assets/js/13.0969fdb4.js"><link rel="prefetch" href="/assets/js/14.c4af07a0.js"><link rel="prefetch" href="/assets/js/15.3d856255.js"><link rel="prefetch" href="/assets/js/16.588eccab.js"><link rel="prefetch" href="/assets/js/17.04fb7640.js"><link rel="prefetch" href="/assets/js/18.fd8a857f.js"><link rel="prefetch" href="/assets/js/19.567995f6.js"><link rel="prefetch" href="/assets/js/2.baf2dd48.js"><link rel="prefetch" href="/assets/js/20.331bde32.js"><link rel="prefetch" href="/assets/js/21.a0d9ff95.js"><link rel="prefetch" href="/assets/js/22.9f604d6b.js"><link rel="prefetch" href="/assets/js/23.40204a70.js"><link rel="prefetch" href="/assets/js/24.676de2f8.js"><link rel="prefetch" href="/assets/js/25.b990bbc9.js"><link rel="prefetch" href="/assets/js/26.e1d6b8b2.js"><link rel="prefetch" href="/assets/js/27.3a0ec496.js"><link rel="prefetch" href="/assets/js/28.edc5ee41.js"><link rel="prefetch" href="/assets/js/29.f4594166.js"><link rel="prefetch" href="/assets/js/3.1a69e19e.js"><link rel="prefetch" href="/assets/js/30.7b8ece5f.js"><link rel="prefetch" href="/assets/js/31.746570df.js"><link rel="prefetch" href="/assets/js/32.80346f41.js"><link rel="prefetch" href="/assets/js/33.59c1939e.js"><link rel="prefetch" href="/assets/js/34.583faad6.js"><link rel="prefetch" href="/assets/js/35.2284c2f2.js"><link rel="prefetch" href="/assets/js/36.5c184555.js"><link rel="prefetch" href="/assets/js/37.f11cf2fc.js"><link rel="prefetch" href="/assets/js/38.d5267f05.js"><link rel="prefetch" href="/assets/js/39.ae84e302.js"><link rel="prefetch" href="/assets/js/4.8b550d71.js"><link rel="prefetch" href="/assets/js/40.fadda820.js"><link rel="prefetch" href="/assets/js/41.b06c928b.js"><link rel="prefetch" href="/assets/js/42.9526cc90.js"><link rel="prefetch" href="/assets/js/43.596505b1.js"><link rel="prefetch" href="/assets/js/44.7bb9afee.js"><link rel="prefetch" href="/assets/js/45.89ab27ec.js"><link rel="prefetch" href="/assets/js/46.798fa05d.js"><link rel="prefetch" href="/assets/js/47.f22eedc4.js"><link rel="prefetch" href="/assets/js/48.8d0a19d1.js"><link rel="prefetch" href="/assets/js/49.2742659f.js"><link rel="prefetch" href="/assets/js/5.06954b77.js"><link rel="prefetch" href="/assets/js/50.8fd5c00e.js"><link rel="prefetch" href="/assets/js/51.10a49966.js"><link rel="prefetch" href="/assets/js/52.c24c9aa6.js"><link rel="prefetch" href="/assets/js/53.0ed4464d.js"><link rel="prefetch" href="/assets/js/54.1e960f0d.js"><link rel="prefetch" href="/assets/js/55.bba04717.js"><link rel="prefetch" href="/assets/js/56.76576281.js"><link rel="prefetch" href="/assets/js/57.6c246fdc.js"><link rel="prefetch" href="/assets/js/58.1b9e8c22.js"><link rel="prefetch" href="/assets/js/59.500e44d9.js"><link rel="prefetch" href="/assets/js/6.d5015605.js"><link rel="prefetch" href="/assets/js/60.10c0e125.js"><link rel="prefetch" href="/assets/js/61.e50ab256.js"><link rel="prefetch" href="/assets/js/62.9369d7bb.js"><link rel="prefetch" href="/assets/js/63.671aa9d3.js"><link rel="prefetch" href="/assets/js/64.03f352d5.js"><link rel="prefetch" href="/assets/js/65.5e04463c.js"><link rel="prefetch" href="/assets/js/66.9622d926.js"><link rel="prefetch" href="/assets/js/67.3a6502c7.js"><link rel="prefetch" href="/assets/js/68.97992dae.js"><link rel="prefetch" href="/assets/js/69.40ea51dc.js"><link rel="prefetch" href="/assets/js/7.911beef5.js"><link rel="prefetch" href="/assets/js/70.603a46a0.js"><link rel="prefetch" href="/assets/js/9.c9de3d13.js">
    <link rel="stylesheet" href="/assets/css/0.styles.17886239.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container no-sidebar"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><!----> <span class="site-name">프로그래밍 인 액션</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/clojure/" class="nav-link">
  Clojure
</a></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/clojure/" class="nav-link">
  Clojure
</a></div> <!----></nav>  <!----> </aside> <main class="page"> <div class="theme-default-content content__default"><ul><li>원제 : 55 Trivia Notations you should know in Ruby</li> <li>원문 : <a href="http://melborne.github.io/" target="_blank" rel="noopener noreferrer">kyoendo<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li> <li>출처 : http://melborne.github.io/2013/03/04/ruby-trivias-you-should-know-4/</li> <li>번역 : <a href="http://nacyot.com" target="_blank" rel="noopener noreferrer">nacyot<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> propellerheaven@gmail.com</li> <li>라이센스 : <a href="http://creativecommons.org/licenses/by-nc/2.1/jp/" target="_blank" rel="noopener noreferrer">cc-by-nc<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul> <h1 id="알아두면-도움이-되는-55가지-루비-기법"><a href="#알아두면-도움이-되는-55가지-루비-기법" class="header-anchor">#</a> 알아두면 도움이 되는 55가지 루비 기법</h1> <p>Ruby는 즐거운 언어입니다. Ruby를 사용하다보면 매뉴얼에도 나와있지 않은
'<strong>작은 발견</strong>'을 만나게 됩니다. 이러한 '발견'은 프로그램의 질이나
효율 개선에 직접적으로 연결되지 않을 지도 모릅니다. 좋기는 커녕 팀
단위로 프로그래밍을 하는 동안에는 사용하지 않는 게 좋을 지도
모릅니다. 하지만 다른 시각에서 생각해보면, 어떤 언어에 아직 모르는
영역이 남아있다는 건 이 언어에 대한 흥미를 잃지 않게 만들어주는 중요한
요인이라는 것도 의심의 여지가 없습니다. 즉 '발견'은 언어를 즐겁게 만들어줍니다.</p> <p>이 블로그에서는 '알아두면 도움이 되는 루비 기법'이라는 주제로 지금까지 3 편의 글을 써왔습니다.</p> <blockquote><p><a href="http://melborne.github.com/2011/06/22/21-Ruby-21-Trivia-Notations-you-should-know-in-Ruby/" target="_blank" rel="noopener noreferrer">알아두면 도움이 되는 21가지 루비 기법<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <p><a href="http://melborne.github.com/2012/02/08/2-12-Ruby-12-Trivia-Notations-you-should-know-in-Ruby/" target="_blank" rel="noopener noreferrer">제 2탄! 알아두면 도움이 되는 12가지 루비 기법<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <p><a href="http://melborne.github.com/2012/04/26/ruby-trivias-you-should-know/" target="_blank" rel="noopener noreferrer">제 3탄! 알아두면 도움이 되는 12가지 루비 기법<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p></blockquote> <p>이 기법들은 인터넷에서 발견한 것, 트위터에서 배운 것, 스스로 발견한 것들을 모은 것들입니다. 이런 기법들을 접할 때마다 제 입에서는 '아하', '우와' 같은 감탄사가 절로 나왔습니다.</p> <p>여기서는 위에서 다룬 45개의 기법과 추가적으로 새로운 10가지 기법을
합쳐 55가지 기법을 소개합니다. 전체적인 내용을 재구성했으면 비교적
이해하기 쉬운 내용을 앞에 배치하고 약간 어려운 부분을 뒤에
배치했습니다. 몇몇 설명에 대해서는 좀 더 간결하게 수정했습니다. 여기서는 언어를
어떻게 사용해야할 것인가, 혹은 어떻게 읽기 쉬운 코드를 작성할 수
있을까 하는 어려운 문제는 제쳐두고 일단 재미나 보이는 기법들에 대해
이렇게 작성할 수 있구나 하면서 즐기셨으면 합니다. Ruby 버전은 1.9나 2.0을 대상으로 합니다.</p> <hr> <p>그리고 이 글은 E-Books으로도 출간되었습니다. 이 글을 E-Books 형식으로 천천히
음미하고 싶으신 분은 구입을 고려해주세요. epub 형식은 물론 Kindle에서
사용 가능한 mobi 형식도 포함되어 있습니다.</p> <a href="http://melborne.github.io/books/"><img src="http://melborne.github.io/assets/images/2013/03/ruby_trivia_cover.png" alt="trivia" style="width:200px;"></a> <blockquote><p>[M'ELBORNE BOOKS](http://melborne.github.io/books/ 'M'ELBORNE BOOKS')</p></blockquote> <hr> <h2 id="_1-array-객체의-스택-메소드"><a href="#_1-array-객체의-스택-메소드" class="header-anchor">#</a> 1. Array 객체의 스택 메소드</h2> <p><code>Array#&lt;&lt;</code> 메소드는 인수를 하나만 받습니다만 <code>Array#push</code>는 여러개의
인수를 받을 수 있습니다. 또한 <code>Array#pop</code>는 한 번에 여러개의 값을 pop 할 수 있습니다.<code>Array#unshift</code> <code>Array#shift</code>도 마찬가지입니다.</p> <div class="language-ruby extra-class"><pre class="language-ruby"><code> stack <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>
 stack<span class="token punctuation">.</span>push <span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span> <span class="token comment"># =&gt; [1, 2, 3]</span>
 stack<span class="token punctuation">.</span>pop <span class="token number">2</span> <span class="token comment"># =&gt; [2, 3]</span>
 stack <span class="token comment"># =&gt; [1]</span>
 stack<span class="token punctuation">.</span>unshift <span class="token number">4</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">,</span> <span class="token number">6</span> <span class="token comment"># =&gt; [4, 5, 6, 1]</span>
 stack<span class="token punctuation">.</span>shift <span class="token number">3</span> <span class="token comment"># =&gt; [4, 5, 6]</span>
 stack <span class="token comment"># =&gt; [1]</span>
</code></pre></div><p>또한 특정 위치에서 여러개의 값을 가져올 때는 <code>Array#values_at</code>이 편리합니다.</p> <div class="language-ruby extra-class"><pre class="language-ruby"><code> lang <span class="token operator">=</span> <span class="token string-literal"><span class="token string">%w(ruby python perl haskell lisp scala)</span></span>
 lang<span class="token punctuation">.</span>values_at <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">5</span> <span class="token comment"># =&gt; [&quot;ruby&quot;, &quot;perl&quot;, &quot;scala&quot;]</span>
</code></pre></div><p>이 메소드는 Hash 객체에서도 사용할 수 있습니다.</p> <div class="language-ruby extra-class"><pre class="language-ruby"><code>lang <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token symbol">ruby</span><span class="token operator">:</span><span class="token string-literal"><span class="token string">'matz'</span></span><span class="token punctuation">,</span> <span class="token symbol">python</span><span class="token operator">:</span><span class="token string-literal"><span class="token string">'guido'</span></span><span class="token punctuation">,</span> <span class="token symbol">perl</span><span class="token operator">:</span><span class="token string-literal"><span class="token string">'larry'</span></span><span class="token punctuation">,</span> <span class="token symbol">lisp</span><span class="token operator">:</span><span class="token string-literal"><span class="token string">'mccarthy'</span></span><span class="token punctuation">}</span>

lang<span class="token punctuation">.</span>values_at <span class="token symbol">:ruby</span><span class="token punctuation">,</span> <span class="token symbol">:perl</span> <span class="token comment"># =&gt; [&quot;matz&quot;, &quot;larry&quot;]</span>
</code></pre></div><h2 id="_2-kernel-array"><a href="#_2-kernel-array" class="header-anchor">#</a> 2. Kernel#Array</h2> <p>서로 다른 타입을 가진 인수를 일괄적으로 처리할 때는 <code>Kernel#Array</code>가 편리합니다.</p> <div class="language-ruby extra-class"><pre class="language-ruby"><code> <span class="token builtin">Array</span> <span class="token number">1</span> <span class="token comment"># =&gt; [1]</span>
 <span class="token builtin">Array</span> <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">]</span> <span class="token comment"># =&gt; [1, 2]</span>
 <span class="token builtin">Array</span> <span class="token number">1.</span><span class="token number">.5</span> <span class="token comment"># =&gt; [1, 2, 3, 4, 5]</span>

 <span class="token keyword">require</span> <span class="token string-literal"><span class="token string">&quot;date&quot;</span></span>
 <span class="token keyword">def</span> <span class="token method-definition"><span class="token function">int2month</span></span><span class="token punctuation">(</span>nums<span class="token punctuation">)</span>
   <span class="token builtin">Array</span><span class="token punctuation">(</span>nums<span class="token punctuation">)</span><span class="token punctuation">.</span>map <span class="token punctuation">{</span> <span class="token operator">|</span>n<span class="token operator">|</span> <span class="token class-name">Date</span><span class="token punctuation">.</span><span class="token keyword">new</span><span class="token punctuation">(</span><span class="token number">2010</span><span class="token punctuation">,</span>n<span class="token punctuation">)</span><span class="token punctuation">.</span>strftime <span class="token string-literal"><span class="token string">&quot;%B&quot;</span></span>  <span class="token punctuation">}</span>
 <span class="token keyword">end</span>

 int2month<span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">)</span> <span class="token comment"># =&gt; [&quot;March&quot;]</span>
 int2month<span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token number">6</span><span class="token punctuation">,</span><span class="token number">9</span><span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token comment"># =&gt; [&quot;February&quot;, &quot;June&quot;, &quot;September&quot;]</span>
 int2month<span class="token punctuation">(</span><span class="token number">4.</span><span class="token number">.8</span><span class="token punctuation">)</span> <span class="token comment"># =&gt; [&quot;April&quot;, &quot;May&quot;, &quot;June&quot;, &quot;July&quot;, &quot;August&quot;]</span>
</code></pre></div><h2 id="_3-요소-구분-콤마"><a href="#_3-요소-구분-콤마" class="header-anchor">#</a> 3. 요소 구분 콤마</h2> <p>배열과 해시의 각 요소를 구분하는 기호로 콤마를 사용하는데 마지막 요소의 콤마는 무시됩니다.</p> <div class="language-ruby extra-class"><pre class="language-ruby"><code> p designers <span class="token operator">=</span> <span class="token punctuation">[</span>
                 <span class="token string-literal"><span class="token string">&quot;John McCarthy&quot;</span></span><span class="token punctuation">,</span>
                 <span class="token string-literal"><span class="token string">&quot;Yukihiro Matsumoto&quot;</span></span><span class="token punctuation">,</span>
                 <span class="token string-literal"><span class="token string">&quot;Larry Wall&quot;</span></span><span class="token punctuation">,</span>
                 <span class="token string-literal"><span class="token string">&quot;Alan Kay&quot;</span></span><span class="token punctuation">,</span>
                 <span class="token string-literal"><span class="token string">&quot;Martin Odersky&quot;</span></span><span class="token punctuation">,</span>
               <span class="token punctuation">]</span>

 <span class="token comment"># &gt;&gt; [&quot;John McCarthy&quot;, &quot;Yukihiro Matsumoto&quot;, &quot;Larry Wall&quot;, &quot;Alan Kay&quot;, &quot;Martin Odersky&quot;]</span>

 p designers <span class="token operator">=</span> <span class="token punctuation">{</span>
                 <span class="token symbol">:lisp</span> <span class="token operator">=&gt;</span> <span class="token string-literal"><span class="token string">&quot;John McCarthy&quot;</span></span><span class="token punctuation">,</span>
                 <span class="token symbol">:ruby</span> <span class="token operator">=&gt;</span> <span class="token string-literal"><span class="token string">&quot;Yukihiro Matsumoto&quot;</span></span><span class="token punctuation">,</span>
                 <span class="token symbol">:perl</span> <span class="token operator">=&gt;</span> <span class="token string-literal"><span class="token string">&quot;Larry Wall&quot;</span></span><span class="token punctuation">,</span>
                 <span class="token symbol">:smalltalk</span> <span class="token operator">=&gt;</span> <span class="token string-literal"><span class="token string">&quot;Alan Kay&quot;</span></span><span class="token punctuation">,</span>
                 <span class="token symbol">:scala</span> <span class="token operator">=&gt;</span> <span class="token string-literal"><span class="token string">&quot;Martin Odersky&quot;</span></span><span class="token punctuation">,</span>
               <span class="token punctuation">}</span>

 <span class="token comment"># &gt;&gt; {:lisp=&gt;&quot;John McCarthy&quot;, :ruby=&gt;&quot;Yukihiro Matsumoto&quot;, :perl=&gt;&quot;Larry Wall&quot;, :smalltalk=&gt;&quot;Alan Kay&quot;, :scala=&gt;&quot;Martin Odersky&quot;}</span>
</code></pre></div><p>요소를 자주 추가/삭제하거나 파일에서 eval을 할 때 유용합니다.</p> <h2 id="_4-해시-리터럴"><a href="#_4-해시-리터럴" class="header-anchor">#</a> 4. 해시 리터럴</h2> <p>Ruby 1.9에는 새로운 해시 리터럴이 추가되었지만, 예전 방식과 혼용해서 사용할 수 있습니다.</p> <div class="language-ruby extra-class"><pre class="language-ruby"><code> designers1 <span class="token operator">=</span> <span class="token punctuation">{</span>
               <span class="token symbol">:lisp</span> <span class="token operator">=&gt;</span> <span class="token string-literal"><span class="token string">&quot;John McCarthy&quot;</span></span><span class="token punctuation">,</span>
               <span class="token symbol">:ruby</span> <span class="token operator">=&gt;</span> <span class="token string-literal"><span class="token string">&quot;Yukihiro Matsumoto&quot;</span></span><span class="token punctuation">,</span>
               <span class="token symbol">:perl</span> <span class="token operator">=&gt;</span> <span class="token string-literal"><span class="token string">&quot;Larry Wall&quot;</span></span><span class="token punctuation">,</span>
               <span class="token symbol">:smalltalk</span> <span class="token operator">=&gt;</span> <span class="token string-literal"><span class="token string">&quot;Alan Kay&quot;</span></span><span class="token punctuation">,</span>
               <span class="token operator">:</span><span class="token string-literal"><span class="token string">'C++'</span></span> <span class="token operator">=&gt;</span>  <span class="token string-literal"><span class="token string">&quot;Bjarne Stroustrup&quot;</span></span><span class="token punctuation">,</span>
             <span class="token punctuation">}</span>

 designers2 <span class="token operator">=</span> <span class="token punctuation">{</span>
               <span class="token symbol">java</span><span class="token operator">:</span> <span class="token string-literal"><span class="token string">&quot;James Gosling&quot;</span></span><span class="token punctuation">,</span>
               <span class="token symbol">python</span><span class="token operator">:</span> <span class="token string-literal"><span class="token string">&quot;Guido van Rossum&quot;</span></span><span class="token punctuation">,</span>
               <span class="token symbol">javascript</span><span class="token operator">:</span> <span class="token string-literal"><span class="token string">&quot;Brendan Eich&quot;</span></span><span class="token punctuation">,</span>
               <span class="token symbol">scala</span><span class="token operator">:</span> <span class="token string-literal"><span class="token string">&quot;Martin Odersky&quot;</span></span><span class="token punctuation">,</span>
             <span class="token punctuation">}</span>

 designers <span class="token operator">=</span> designers1<span class="token punctuation">.</span>merge designers2
  <span class="token comment"># =&gt; {:lisp=&gt;&quot;John McCarthy&quot;, :ruby=&gt;&quot;Yukihiro Matsumoto&quot;, :perl=&gt;&quot;Larry Wall&quot;, :smalltalk=&gt;&quot;Alan Kay&quot;, :&quot;C++&quot;=&gt;&quot;Bjarne Stroustrup&quot;, :java=&gt;&quot;James Gosling&quot;, :python=&gt;&quot;Guido van Rossum&quot;, :javascript=&gt;&quot;Brendan Eich&quot;, :scala=&gt;&quot;Martin Odersky&quot;}</span>
</code></pre></div><h2 id="_5-enumerable-each-with-object"><a href="#_5-enumerable-each-with-object" class="header-anchor">#</a> 5. Enumerable#each_with_object</h2> <p>Enumerable#inject는 편리한 메소드지만 블록에서 조건은 지정을 하는 경우에도 각 반복에서 결과값이 중첩될 객체가 리턴되는 것이 보장되어야만 합니다.</p> <div class="language-ruby extra-class"><pre class="language-ruby"><code> designers<span class="token punctuation">.</span>inject<span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token operator">|</span>mem<span class="token punctuation">,</span> <span class="token punctuation">(</span>lang<span class="token punctuation">,</span> name<span class="token punctuation">)</span><span class="token operator">|</span> mem <span class="token operator">&lt;&lt;</span> <span class="token punctuation">[</span>name<span class="token punctuation">,</span>lang<span class="token punctuation">]</span><span class="token punctuation">.</span>join<span class="token punctuation">(</span><span class="token string-literal"><span class="token string">'/'</span></span><span class="token punctuation">)</span> <span class="token keyword">if</span> lang<span class="token punctuation">[</span><span class="token operator">/</span>l<span class="token operator">/</span><span class="token punctuation">]</span><span class="token punctuation">;</span> mem <span class="token punctuation">}</span>
  <span class="token comment"># =&gt; [&quot;John McCarthy/lisp&quot;, &quot;Larry Wall/perl&quot;, &quot;Alan Kay/smalltalk&quot;, &quot;Martin Odersky/scala&quot;]</span>
</code></pre></div><p>블록 마지막의 '; mem'부분입니다.</p> <p><code>Enumerable#each_with_object</code>를 이러한 문제를 사용하면 간단히 해결할 수 있습니다.</p> <div class="language-ruby extra-class"><pre class="language-ruby"><code> designers<span class="token punctuation">.</span>each_with_object<span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token operator">|</span><span class="token punctuation">(</span>lang<span class="token punctuation">,</span> name<span class="token punctuation">)</span><span class="token punctuation">,</span> mem<span class="token operator">|</span> mem <span class="token operator">&lt;&lt;</span> <span class="token punctuation">[</span>name<span class="token punctuation">,</span>lang<span class="token punctuation">]</span><span class="token punctuation">.</span>join<span class="token punctuation">(</span><span class="token string-literal"><span class="token string">'/'</span></span><span class="token punctuation">)</span> <span class="token keyword">if</span> lang<span class="token punctuation">[</span><span class="token operator">/</span>l<span class="token operator">/</span><span class="token punctuation">]</span> <span class="token punctuation">}</span>
  <span class="token comment"># =&gt; [&quot;John McCarthy/lisp&quot;, &quot;Larry Wall/perl&quot;, &quot;Alan Kay/smalltalk&quot;, &quot;Martin Odersky/scala&quot;]</span>
</code></pre></div><p>이름이 길어서 가능하면 사용하고 싶지 않습니다만...</p> <h2 id="_6-splat-전개"><a href="#_6-splat-전개" class="header-anchor">#</a> 6. splat 전개</h2> <p>Ruby에서 알파벳 배열을 만들 때는 보통 아래와 같은 방법을 사용합니다.</p> <div class="language-ruby extra-class"><pre class="language-ruby"><code> <span class="token punctuation">(</span><span class="token number">1.</span><span class="token number">.20</span><span class="token punctuation">)</span><span class="token punctuation">.</span>to_a <span class="token comment"># =&gt; [1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 16, 17, 18, 19, 20]</span>
 <span class="token punctuation">(</span><span class="token string-literal"><span class="token string">'a'</span></span><span class="token operator">..</span><span class="token string-literal"><span class="token string">'z'</span></span><span class="token punctuation">)</span><span class="token punctuation">.</span>to_a <span class="token comment"># =&gt; [&quot;a&quot;, &quot;b&quot;, &quot;c&quot;, &quot;d&quot;, &quot;e&quot;, &quot;f&quot;, &quot;g&quot;, &quot;h&quot;, &quot;i&quot;, &quot;j&quot;, &quot;k&quot;, &quot;l&quot;, &quot;m&quot;, &quot;n&quot;, &quot;o&quot;, &quot;p&quot;, &quot;q&quot;, &quot;r&quot;, &quot;s&quot;, &quot;t&quot;, &quot;u&quot;, &quot;v&quot;, &quot;w&quot;, &quot;x&quot;, &quot;y&quot;, &quot;z&quot;]</span>
 <span class="token punctuation">(</span><span class="token number">1.</span><span class="token number">.10</span><span class="token punctuation">)</span><span class="token punctuation">.</span>to_a <span class="token operator">+</span> <span class="token punctuation">(</span><span class="token number">20.</span><span class="token number">.30</span><span class="token punctuation">)</span><span class="token punctuation">.</span>to_a <span class="token comment"># =&gt; [1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 20, 21, 22, 23, 24, 25, 26, 27, 28, 29, 30]</span>
</code></pre></div><p>이러한 표현은 <code>*</code>(splat) 전개를 사용해 아래와 같이 바꿔쓸 수 있습니다.</p> <div class="language-ruby extra-class"><pre class="language-ruby"><code> <span class="token punctuation">[</span><span class="token operator">*</span><span class="token number">1.</span><span class="token number">.20</span><span class="token punctuation">]</span> <span class="token comment"># =&gt; [1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 16, 17, 18, 19, 20]</span>
 <span class="token punctuation">[</span><span class="token operator">*</span><span class="token string-literal"><span class="token string">'a'</span></span><span class="token operator">..</span><span class="token string-literal"><span class="token string">'m'</span></span><span class="token punctuation">]</span> <span class="token comment"># =&gt; [&quot;a&quot;, &quot;b&quot;, &quot;c&quot;, &quot;d&quot;, &quot;e&quot;, &quot;f&quot;, &quot;g&quot;, &quot;h&quot;, &quot;i&quot;, &quot;j&quot;, &quot;k&quot;, &quot;l&quot;, &quot;m&quot;]</span>
 <span class="token punctuation">[</span><span class="token operator">*</span><span class="token number">1.</span><span class="token number">.10</span><span class="token punctuation">,</span> <span class="token operator">*</span><span class="token number">20.</span><span class="token number">.30</span><span class="token punctuation">]</span> <span class="token comment"># =&gt; [1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 20, 21, 22, 23, 24, 25, 26, 27, 28, 29, 30]</span>
</code></pre></div><h2 id="_7-전치-콜론"><a href="#_7-전치-콜론" class="header-anchor">#</a> 7. 전치 콜론</h2> <p>문자열을 심볼로 변환할 때는 일반적으로, String#intern이나
String#to_sym 메소드를 사용합니다만 문자열 리터럴에 앞에 콜론을 놓는
방법도 있습니다.</p> <div class="language-ruby extra-class"><pre class="language-ruby"><code> <span class="token string-literal"><span class="token string">'goodbye'</span></span><span class="token punctuation">.</span>intern <span class="token comment"># =&gt; :goodbye</span>
 <span class="token string-literal"><span class="token string">'goodbye'</span></span><span class="token punctuation">.</span>to_sym <span class="token comment"># =&gt; :goodbye</span>

 <span class="token operator">:</span><span class="token string-literal"><span class="token string">'goodbye'</span></span> <span class="token comment"># =&gt; :goodbye</span>

 a <span class="token operator">=</span> <span class="token string-literal"><span class="token string">'goodbye'</span></span>
 <span class="token symbol">:&quot;#{a}&quot;</span> <span class="token comment"># =&gt; :goodbye</span>
</code></pre></div><h2 id="_8-enumerator-with-index"><a href="#_8-enumerator-with-index" class="header-anchor">#</a> 8. Enumerator#with_index</h2> <p>임의의 리스트를 표준 출력할 때 각 리스트의 순서를 나타내는 인덱스 숫자가 필요할 때 일반적으로 <code>Enumerator#with_index</code>를 사용합니다.</p> <div class="language-ruby extra-class"><pre class="language-ruby"><code>names <span class="token operator">=</span> <span class="token builtin">Module</span><span class="token punctuation">.</span>constants<span class="token punctuation">.</span>take<span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">)</span>
names<span class="token punctuation">.</span>each_with_index <span class="token punctuation">{</span> <span class="token operator">|</span>name<span class="token punctuation">,</span> i<span class="token operator">|</span> puts <span class="token string-literal"><span class="token string">&quot;%d: %s&quot;</span></span> <span class="token operator">%</span> <span class="token punctuation">[</span>i<span class="token operator">+</span><span class="token number">1</span><span class="token punctuation">,</span> name<span class="token punctuation">]</span> <span class="token punctuation">}</span>
<span class="token comment"># &gt;&gt; 1: Object</span>
<span class="token comment"># &gt;&gt; 2: Module</span>
<span class="token comment"># &gt;&gt; 3: Class</span>
<span class="token comment"># &gt;&gt; 4: Kernel</span>
<span class="token comment"># &gt;&gt; 5: NilClass</span>
<span class="token comment"># &gt;&gt; 6: NIL</span>
<span class="token comment"># &gt;&gt; 7: Data</span>
<span class="token comment"># &gt;&gt; 8: TrueClass</span>
<span class="token comment"># &gt;&gt; 9: TRUE</span>
<span class="token comment"># &gt;&gt; 10: FalseClass</span>
</code></pre></div><p><code>i+1</code>를 사용하는 게 영 맘에 들지 않습니다. 여기에 공감하시는 분들을 위해 <code>Enumerator#with_index</code> 메소드가 있습니다.</p> <div class="language-ruby extra-class"><pre class="language-ruby"><code>names <span class="token operator">=</span> <span class="token builtin">Module</span><span class="token punctuation">.</span>constants<span class="token punctuation">.</span>take<span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">)</span>
names<span class="token punctuation">.</span><span class="token keyword">each</span><span class="token punctuation">.</span>with_index<span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token operator">|</span>name<span class="token punctuation">,</span> i<span class="token operator">|</span> puts <span class="token string-literal"><span class="token string">&quot;%d: %s&quot;</span></span> <span class="token operator">%</span> <span class="token punctuation">[</span>i<span class="token punctuation">,</span> name<span class="token punctuation">]</span> <span class="token punctuation">}</span>
<span class="token comment"># &gt;&gt; 1: Object</span>
<span class="token comment"># &gt;&gt; 2: Module</span>
<span class="token comment"># &gt;&gt; 3: Class</span>
<span class="token comment"># &gt;&gt; 4: Kernel</span>
<span class="token comment"># &gt;&gt; 5: NilClass</span>
<span class="token comment"># &gt;&gt; 6: NIL</span>
<span class="token comment"># &gt;&gt; 7: Data</span>
<span class="token comment"># &gt;&gt; 8: TrueClass</span>
<span class="token comment"># &gt;&gt; 9: TRUE</span>
<span class="token comment"># &gt;&gt; 10: FalseClass</span>
</code></pre></div><p>with_index는 index의 offset을 인수로 받습니다. comparable한 객체를 받아주면 더욱 좋겠습니다만.</p> <h2 id="_9-integer-times"><a href="#_9-integer-times" class="header-anchor">#</a> 9. Integer#times</h2> <p><code>times</code>는 특정 횟수만큼 반복하고 싶을 때 사용합니다.</p> <div class="language-ruby extra-class"><pre class="language-ruby"><code>you_said <span class="token operator">=</span> <span class="token string-literal"><span class="token string">'てぶくろ'</span></span>
<span class="token number">6.</span>times <span class="token punctuation">{</span> puts you_said<span class="token punctuation">.</span>reverse<span class="token operator">!</span><span class="token punctuation">}</span> <span class="token comment"># =&gt; 6</span>
<span class="token comment"># &gt;&gt; ろくぶて</span>
<span class="token comment"># &gt;&gt; てぶくろ</span>
<span class="token comment"># &gt;&gt; ろくぶて</span>
<span class="token comment"># &gt;&gt; てぶくろ</span>
<span class="token comment"># &gt;&gt; ろくぶて</span>
<span class="token comment"># &gt;&gt; てぶくろ</span>
</code></pre></div><p>times는 블록을 받지 않으면 Enumerator를 리턴합니다. 따라서 여러개의
객체를 생성할 때 사용할 수 있습니다. 20개의 RGB 컬러 샘플을 만든다고 해보죠.</p> <div class="language-ruby extra-class"><pre class="language-ruby"><code><span class="token number">20.</span>times<span class="token punctuation">.</span>map <span class="token punctuation">{</span> <span class="token punctuation">[</span>rand<span class="token punctuation">(</span><span class="token number">256</span><span class="token punctuation">)</span><span class="token punctuation">,</span> rand<span class="token punctuation">(</span><span class="token number">256</span><span class="token punctuation">)</span><span class="token punctuation">,</span> rand<span class="token punctuation">(</span><span class="token number">256</span><span class="token punctuation">)</span><span class="token punctuation">]</span> <span class="token punctuation">}</span> <span class="token comment"># =&gt; [[45, 190, 194], [94, 43, 125], [6, 104, 181], [144, 92, 114], [34, 161, 214], [96, 69, 241], [216, 246, 133], [6, 237, 131], [194, 95, 214], [177, 252, 202], [184, 149, 142], [184, 166, 45], [41, 108, 115], [176, 100, 138], [124, 213, 89], [173, 123, 34], [137, 31, 47], [54, 92, 186], [118, 239, 217], [150, 184, 240]]</span>
</code></pre></div><h2 id="_10-string-succ-integer-succ"><a href="#_10-string-succ-integer-succ" class="header-anchor">#</a> 10. String#succ / Integer#succ</h2> <p>Excel과 같이 A에서 부터 차례대로 문자로된 인덱스를 생성하려면 어떻게
해야할까요?최근에 비슷한 문제를 접했습니다. Ruby에선 <code>String#succ</code> 또는 <code>next</code>가 있으니 간단히 해결 가능합니다.</p> <div class="language-ruby extra-class"><pre class="language-ruby"><code>col <span class="token operator">=</span> <span class="token string-literal"><span class="token string">'@'</span></span>
<span class="token number">60.</span>times<span class="token punctuation">.</span>map <span class="token punctuation">{</span> col <span class="token operator">=</span> col<span class="token punctuation">.</span>succ <span class="token punctuation">}</span> <span class="token comment"># =&gt; [&quot;A&quot;, &quot;B&quot;, &quot;C&quot;, &quot;D&quot;, &quot;E&quot;, &quot;F&quot;, &quot;G&quot;, &quot;H&quot;, &quot;I&quot;, &quot;J&quot;, &quot;K&quot;, &quot;L&quot;, &quot;M&quot;, &quot;N&quot;, &quot;O&quot;, &quot;P&quot;, &quot;Q&quot;, &quot;R&quot;, &quot;S&quot;, &quot;T&quot;, &quot;U&quot;, &quot;V&quot;, &quot;W&quot;, &quot;X&quot;, &quot;Y&quot;, &quot;Z&quot;, &quot;AA&quot;, &quot;AB&quot;, &quot;AC&quot;, &quot;AD&quot;, &quot;AE&quot;, &quot;AF&quot;, &quot;AG&quot;, &quot;AH&quot;, &quot;AI&quot;, &quot;AJ&quot;, &quot;AK&quot;, &quot;AL&quot;, &quot;AM&quot;, &quot;AN&quot;, &quot;AO&quot;, &quot;AP&quot;, &quot;AQ&quot;, &quot;AR&quot;, &quot;AS&quot;, &quot;AT&quot;, &quot;AU&quot;, &quot;AV&quot;, &quot;AW&quot;, &quot;AX&quot;, &quot;AY&quot;, &quot;AZ&quot;, &quot;BA&quot;, &quot;BB&quot;, &quot;BC&quot;, &quot;BD&quot;, &quot;BE&quot;, &quot;BF&quot;, &quot;BG&quot;, &quot;BH&quot;]</span>
</code></pre></div><h2 id="_11-comparable-between"><a href="#_11-comparable-between" class="header-anchor">#</a> 11. Comparable.between?</h2> <p>값이 특정 범위 안에 있는 지 여부를 판단할 때 사용됩니다. 보통은 다음과 같이 사용합니다.</p> <div class="language-ruby extra-class"><pre class="language-ruby"><code>pos <span class="token operator">=</span> <span class="token number">48</span>
status <span class="token operator">=</span>
  <span class="token keyword">if</span> <span class="token number">0</span> <span class="token operator">&lt;=</span> pos <span class="token operator">&amp;&amp;</span> pos <span class="token operator">&lt;=</span> <span class="token number">50</span>
    <span class="token symbol">:you_are_in</span>
  <span class="token keyword">else</span>
    <span class="token symbol">:you_are_out</span>
  <span class="token keyword">end</span>
status <span class="token comment"># =&gt; :you_are_in</span>
</code></pre></div><p>이렇게 짜놓고 CoffeeScript를 보면 분한 마음이 듭니다. 하지만 안심해주세요. Ruby에는 <code>between?</code> 메소드가 있습니다.</p> <div class="language-ruby extra-class"><pre class="language-ruby"><code>pos <span class="token operator">=</span> <span class="token number">48</span>
status <span class="token operator">=</span>
  <span class="token keyword">if</span> pos<span class="token punctuation">.</span>between<span class="token operator">?</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">50</span><span class="token punctuation">)</span>
    <span class="token symbol">:you_are_in</span>
  <span class="token keyword">else</span>
    <span class="token symbol">:you_are_out</span>
  <span class="token keyword">end</span>
status <span class="token comment"># =&gt; :you_are_in</span>

pos <span class="token operator">=</span> <span class="token string-literal"><span class="token string">'D'</span></span>
grade <span class="token operator">=</span>
  <span class="token keyword">if</span> pos<span class="token punctuation">.</span>between<span class="token operator">?</span><span class="token punctuation">(</span><span class="token string-literal"><span class="token string">'A'</span></span><span class="token punctuation">,</span> <span class="token string-literal"><span class="token string">'C'</span></span><span class="token punctuation">)</span>
    <span class="token symbol">:you_are_good!</span>  <span class="token keyword">else</span>
    <span class="token symbol">:try_again!</span>  <span class="token keyword">end</span>
grade <span class="token comment"># =&gt; :try_again!</span>
</code></pre></div><p>저는 case 파 입니다만...</p> <div class="language-ruby extra-class"><pre class="language-ruby"><code>pos <span class="token operator">=</span> <span class="token number">48</span>
status <span class="token operator">=</span>
  <span class="token keyword">case</span> pos
  <span class="token keyword">when</span> <span class="token number">0.</span><span class="token number">.50</span>
    <span class="token symbol">:you_are_in</span>
  <span class="token keyword">else</span>
    <span class="token symbol">:you_are_out</span>
  <span class="token keyword">end</span>
status <span class="token comment"># =&gt; :you_are_in</span>
</code></pre></div><p>##12. Array#first/last
<code>Array#first/last</code>는 가져올 요소의 수를 인수로 받습니다.</p> <div class="language-ruby extra-class"><pre class="language-ruby"><code>arr <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token operator">*</span><span class="token number">1.</span><span class="token number">.100</span><span class="token punctuation">]</span>
arr<span class="token punctuation">.</span>first<span class="token punctuation">(</span><span class="token number">5</span><span class="token punctuation">)</span> <span class="token operator">+</span> arr<span class="token punctuation">.</span>last<span class="token punctuation">(</span><span class="token number">5</span><span class="token punctuation">)</span> <span class="token comment"># =&gt; [1, 2, 3, 4, 5, 96, 97, 98, 99, 100]</span>
</code></pre></div><p>Range 객체에서도 같은 메소드를 지원하고 있으니, 위의 예제는 아래와 같이 작성할 수도 있습니다.</p> <div class="language-ruby extra-class"><pre class="language-ruby"><code>range <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token number">1.</span><span class="token number">.100</span><span class="token punctuation">)</span>
range<span class="token punctuation">.</span>first<span class="token punctuation">(</span><span class="token number">5</span><span class="token punctuation">)</span> <span class="token operator">+</span> range<span class="token punctuation">.</span>last<span class="token punctuation">(</span><span class="token number">5</span><span class="token punctuation">)</span> <span class="token comment"># =&gt; [1, 2, 3, 4, 5, 96, 97, 98, 99, 100]</span>
</code></pre></div><h2 id="_13-변수-nil-초기화"><a href="#_13-변수-nil-초기화" class="header-anchor">#</a> 13. 변수 nil 초기화</h2> <p>여러 변수를 <code>nil</code>으로 초기화하려는 경우에 어떻게 하시나요?이렇게
하시나요?</p> <div class="language-ruby extra-class"><pre class="language-ruby"><code>a<span class="token punctuation">,</span> b<span class="token punctuation">,</span> c<span class="token punctuation">,</span> d<span class="token punctuation">,</span> e<span class="token punctuation">,</span> f<span class="token punctuation">,</span> g<span class="token punctuation">,</span> h<span class="token punctuation">,</span> i<span class="token punctuation">,</span> k <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token keyword">nil</span><span class="token punctuation">]</span> <span class="token operator">*</span> <span class="token number">10</span>

<span class="token punctuation">[</span>a<span class="token punctuation">,</span> b<span class="token punctuation">,</span> c<span class="token punctuation">,</span> d<span class="token punctuation">,</span> e<span class="token punctuation">,</span> f<span class="token punctuation">,</span> g<span class="token punctuation">,</span> h<span class="token punctuation">,</span> i<span class="token punctuation">,</span> k<span class="token punctuation">]</span><span class="token punctuation">.</span>all<span class="token operator">?</span><span class="token punctuation">(</span><span class="token operator">&amp;</span><span class="token symbol">:nil?</span><span class="token punctuation">)</span> <span class="token comment"># =&gt; true</span>
</code></pre></div><p>하지만 다중 대입을 할 때는 값이 없으면 nil이 지정되므로 아래 코드면 충분합니다.</p> <div class="language-ruby extra-class"><pre class="language-ruby"><code>a<span class="token punctuation">,</span> b<span class="token punctuation">,</span> c<span class="token punctuation">,</span> d<span class="token punctuation">,</span> e<span class="token punctuation">,</span> f<span class="token punctuation">,</span> g<span class="token punctuation">,</span> h<span class="token punctuation">,</span> i<span class="token punctuation">,</span> k <span class="token operator">=</span> <span class="token keyword">nil</span>

<span class="token punctuation">[</span>a<span class="token punctuation">,</span> b<span class="token punctuation">,</span> c<span class="token punctuation">,</span> d<span class="token punctuation">,</span> e<span class="token punctuation">,</span> f<span class="token punctuation">,</span> g<span class="token punctuation">,</span> h<span class="token punctuation">,</span> i<span class="token punctuation">,</span> k<span class="token punctuation">]</span><span class="token punctuation">.</span>all<span class="token operator">?</span><span class="token punctuation">(</span><span class="token operator">&amp;</span><span class="token symbol">:nil?</span><span class="token punctuation">)</span> <span class="token comment"># =&gt; true</span>
</code></pre></div><h2 id="_14-해시-키"><a href="#_14-해시-키" class="header-anchor">#</a> 14. 해시 키</h2> <p>해시 리터럴은 다음과 같이 작성합니다.</p> <div class="language-ruby extra-class"><pre class="language-ruby"><code><span class="token punctuation">{</span><span class="token symbol">a</span><span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token symbol">b</span><span class="token operator">:</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token symbol">c</span><span class="token operator">:</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token symbol">a</span><span class="token operator">:</span> <span class="token number">4</span><span class="token punctuation">,</span> <span class="token symbol">e</span><span class="token operator">:</span> <span class="token number">5</span><span class="token punctuation">}</span> <span class="token comment"># =&gt; {:a=&gt;4, :b=&gt;2, :c=&gt;3, :e=&gt;5}</span>
</code></pre></div><p>눈치 채셨나요?실수로 키를 중복해서 사용해도 에러는 발생하지 않습니다.</p> <p>특히 배열을 해시로 변환할 때는 주의가 필요합니다.</p> <div class="language-ruby extra-class"><pre class="language-ruby"><code>arr <span class="token operator">=</span> <span class="token punctuation">[</span>a<span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token symbol">b</span><span class="token operator">:</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token symbol">c</span><span class="token operator">:</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token symbol">a</span><span class="token operator">:</span> <span class="token number">4</span><span class="token punctuation">,</span> <span class="token symbol">e</span><span class="token operator">:</span> <span class="token number">5</span><span class="token punctuation">]</span>
<span class="token builtin">Hash</span><span class="token punctuation">[</span> <span class="token operator">*</span>arr <span class="token punctuation">]</span> <span class="token comment"># =&gt; {:a=&gt;4, :b=&gt;2, :c=&gt;3, :e=&gt;5}</span>
</code></pre></div><h2 id="_15-메소드-인수의-인수"><a href="#_15-메소드-인수의-인수" class="header-anchor">#</a> 15. 메소드 인수의 인수</h2> <p>Ruby에서 인수를 받는 메소드를 호출할 때는 괄호를 생략할 수 있습니다만, 인수가 심볼일 때는 메소드 이름과 인수 사이의 공백도 생략할 수 있습니다.</p> <div class="language-ruby extra-class"><pre class="language-ruby"><code> <span class="token keyword">def</span> <span class="token method-definition"><span class="token function">name</span></span><span class="token punctuation">(</span>sym<span class="token punctuation">)</span>
   <span class="token variable">@name</span> <span class="token operator">=</span> sym
 <span class="token keyword">end</span>

 <span class="token symbol">name</span><span class="token symbol">:charlie</span> <span class="token comment"># =&gt; :charlie</span>
</code></pre></div><p>이렇게 작성하면 더욱 선언적으로 보입니다.</p> <p>하지만 이걸 변수에 넣거나 puts로 출력하는 경우엔 제대로 읽어들이지 못 하기 때문에 한정적인 방법이라고 할 수 있습니다.</p> <p>또한 * &amp;의 뒤의 스페이스는 무시되므로 아래와 같이 작성할 수 있습니다.</p> <div class="language-ruby extra-class"><pre class="language-ruby"><code> <span class="token keyword">def</span> <span class="token method-definition"><span class="token function">teach_me</span></span><span class="token punctuation">(</span>question<span class="token punctuation">,</span> <span class="token operator">*</span> args<span class="token punctuation">,</span> <span class="token operator">&amp;</span> block<span class="token punctuation">)</span>
   google<span class="token punctuation">(</span>question<span class="token punctuation">,</span> <span class="token operator">*</span> args<span class="token punctuation">,</span> <span class="token operator">&amp;</span> block<span class="token punctuation">)</span>
 <span class="token keyword">end</span>

 a<span class="token punctuation">,</span> b<span class="token punctuation">,</span> <span class="token operator">*</span> c <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token number">3</span><span class="token punctuation">,</span><span class="token number">4</span>
 c <span class="token comment"># =&gt; [3,4]</span>
</code></pre></div><p>그래서 어쨌다는 걸까요...</p> <h2 id="_16-부정"><a href="#_16-부정" class="header-anchor">#</a> 16. 부정</h2> <p>부정의 의미로 사용되는 <code>!</code> 혹은 <code>not</code>이 맘에 드시지 않는 분?</p> <p>그렇다면 <code>BaiscObject#!</code>가 있습니다!</p> <div class="language-ruby extra-class"><pre class="language-ruby"><code> <span class="token boolean">true</span><span class="token punctuation">.</span><span class="token operator">!</span><span class="token comment"># =&gt; false</span>
 <span class="token boolean">false</span><span class="token punctuation">.</span><span class="token operator">!</span><span class="token comment"># =&gt; true</span>
 <span class="token number">1.</span><span class="token operator">!</span><span class="token comment"># =&gt; false</span>
 <span class="token string-literal"><span class="token string">'hello'</span></span><span class="token punctuation">.</span><span class="token operator">!</span><span class="token punctuation">.</span><span class="token operator">!</span><span class="token comment"># =&gt; true</span>
</code></pre></div><p>...</p> <p>다음으로 넘어가죠...</p> <h2 id="_17-노테이션"><a href="#_17-노테이션" class="header-anchor">#</a> 17. % 노테이션</h2> <p>String#%을 사용하면 문자열을</p> <div class="language-ruby extra-class"><pre class="language-ruby"><code> lang <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token symbol">:ruby</span><span class="token punctuation">,</span> <span class="token symbol">:java</span><span class="token punctuation">]</span>
 <span class="token string-literal"><span class="token string">&quot;I love %s, not %s&quot;</span></span> <span class="token operator">%</span> lang <span class="token comment"># =&gt; &quot;I love ruby, not java&quot;</span>
</code></pre></div><p>뿐만 아니라 해시도 받을 수 있습니다.</p> <div class="language-ruby extra-class"><pre class="language-ruby"><code> lang <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token symbol">a</span><span class="token operator">:</span> <span class="token symbol">:java</span><span class="token punctuation">,</span> <span class="token symbol">b</span><span class="token operator">:</span> <span class="token symbol">:ruby</span><span class="token punctuation">}</span>
 <span class="token string-literal"><span class="token string">&quot;I love %{b}, not %{a}&quot;</span></span> <span class="token operator">%</span> lang <span class="token comment"># =&gt; &quot;I love ruby, not java&quot;</span>
</code></pre></div><h2 id="_18-문자열-분리"><a href="#_18-문자열-분리" class="header-anchor">#</a> 18. 문자열 분리</h2> <p>문자열을 각 문자 별로 분리할 때는 <code>String#split</code>나 <code>String#chars</code> 메소드를 사용할 수 있습니다.</p> <div class="language-ruby extra-class"><pre class="language-ruby"><code> alpha <span class="token operator">=</span> <span class="token string-literal"><span class="token string">&quot;abcdefghijklmnopqrstuvwxyz&quot;</span></span>
 alpha<span class="token punctuation">.</span>split<span class="token punctuation">(</span><span class="token operator">/</span><span class="token operator">/</span><span class="token punctuation">)</span> <span class="token comment"># =&gt; [&quot;a&quot;, &quot;b&quot;, &quot;c&quot;, &quot;d&quot;, &quot;e&quot;, &quot;f&quot;, &quot;g&quot;, &quot;h&quot;, &quot;i&quot;, &quot;j&quot;, &quot;k&quot;, &quot;l&quot;, &quot;m&quot;, &quot;n&quot;, &quot;o&quot;, &quot;p&quot;, &quot;q&quot;, &quot;r&quot;, &quot;s&quot;, &quot;t&quot;, &quot;u&quot;, &quot;v&quot;, &quot;w&quot;, &quot;x&quot;, &quot;y&quot;, &quot;z&quot;]</span>

 alpha<span class="token punctuation">.</span>chars<span class="token punctuation">.</span>to_a <span class="token comment"># =&gt; [&quot;a&quot;, &quot;b&quot;, &quot;c&quot;, &quot;d&quot;, &quot;e&quot;, &quot;f&quot;, &quot;g&quot;, &quot;h&quot;, &quot;i&quot;, &quot;j&quot;, &quot;k&quot;, &quot;l&quot;, &quot;m&quot;, &quot;n&quot;, &quot;o&quot;, &quot;p&quot;, &quot;q&quot;, &quot;r&quot;, &quot;s&quot;, &quot;t&quot;, &quot;u&quot;, &quot;v&quot;, &quot;w&quot;, &quot;x&quot;, &quot;y&quot;, &quot;z&quot;]</span>
</code></pre></div><p>또한 ruby 2.0에선 chars 메소드를 사용한 후에 별도로 to_a를 호출해주지 않아도 됩니다.</p> <p>하지만 문자열을 여러개의 문자를 기준으로 분리할 때는 <code>String#scan</code>이 편리합니다.</p> <div class="language-ruby extra-class"><pre class="language-ruby"><code> alpha<span class="token punctuation">.</span>scan<span class="token punctuation">(</span><span class="token regex-literal"><span class="token regex">/.../</span></span><span class="token punctuation">)</span> <span class="token comment"># =&gt; [&quot;abc&quot;, &quot;def&quot;, &quot;ghi&quot;, &quot;jkl&quot;, &quot;mno&quot;, &quot;pqr&quot;, &quot;stu&quot;, &quot;vwx&quot;]</span>
 alpha<span class="token punctuation">.</span>scan<span class="token punctuation">(</span><span class="token regex-literal"><span class="token regex">/.{1,3}/</span></span><span class="token punctuation">)</span> <span class="token comment"># =&gt; [&quot;abc&quot;, &quot;def&quot;, &quot;ghi&quot;, &quot;jkl&quot;, &quot;mno&quot;, &quot;pqr&quot;, &quot;stu&quot;, &quot;vwx&quot;, &quot;yz&quot;]</span>

 number <span class="token operator">=</span> <span class="token string-literal"><span class="token string">'12345678'</span></span>
 <span class="token keyword">def</span> <span class="token method-definition"><span class="token class-name">number</span><span class="token punctuation">.</span><span class="token function">comma_value</span></span>
   reverse<span class="token punctuation">.</span>scan<span class="token punctuation">(</span><span class="token regex-literal"><span class="token regex">/.{1,3}/</span></span><span class="token punctuation">)</span><span class="token punctuation">.</span>join<span class="token punctuation">(</span><span class="token string-literal"><span class="token string">','</span></span><span class="token punctuation">)</span><span class="token punctuation">.</span>reverse
 <span class="token keyword">end</span>
 number<span class="token punctuation">.</span>comma_value <span class="token comment"># =&gt; &quot;12,345,678&quot;</span>
</code></pre></div><h2 id="_19-array"><a href="#_19-array" class="header-anchor">#</a> 19. Array#*</h2> <p><code>Array#*</code>에 정수를 넘겨주면 배열을 해당하는 수만큼 반복한 배열을 리턴합니다만, 문자열을 넘겨주면 문자열을 조인하고 그 사이에 해당하는 문자열로 연결해줍니다.</p> <div class="language-ruby extra-class"><pre class="language-ruby"><code> <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">]</span> <span class="token operator">*</span> <span class="token number">3</span> <span class="token comment"># =&gt; [1, 2, 3, 1, 2, 3, 1, 2, 3]</span>

 <span class="token punctuation">[</span><span class="token number">2009</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">10</span><span class="token punctuation">]</span> <span class="token operator">*</span> <span class="token string-literal"><span class="token string">'-'</span></span> <span class="token comment"># =&gt; &quot;2009-1-10&quot;</span>
</code></pre></div><p>그럼 이 지식을 활용해 다음 예제에서 x의 출력을 맞춰보세요!</p> <div class="language-ruby extra-class"><pre class="language-ruby"><code><span class="token operator">*</span>a<span class="token punctuation">,</span> b<span class="token punctuation">,</span> c <span class="token operator">=</span> <span class="token string-literal"><span class="token string">%w(1 2 3 4 5)</span></span>

x <span class="token operator">=</span> a <span class="token operator">*</span> b <span class="token operator">+</span> c

puts x
</code></pre></div><h2 id="_20-array-uniq"><a href="#_20-array-uniq" class="header-anchor">#</a> 20. Array#uniq</h2> <p>배열에서 중복된 값들을 제외할 때 <code>Array#uniq</code> 메소드를 사용하곤합니다. 이 때 uniq 메소드에 블록을 넘겨 조건을 지정할 수 있습니다.</p> <div class="language-ruby extra-class"><pre class="language-ruby"><code> Designer <span class="token operator">=</span> <span class="token class-name">Struct</span><span class="token punctuation">.</span><span class="token keyword">new</span><span class="token punctuation">(</span><span class="token symbol">:name</span><span class="token punctuation">,</span> <span class="token symbol">:lang</span><span class="token punctuation">)</span>
 data <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token string-literal"><span class="token string">'matz'</span></span> <span class="token operator">=&gt;</span> <span class="token symbol">:ruby</span><span class="token punctuation">,</span> <span class="token string-literal"><span class="token string">'kay'</span></span> <span class="token operator">=&gt;</span> <span class="token symbol">:smalltalk</span><span class="token punctuation">,</span> <span class="token string-literal"><span class="token string">'gosling'</span></span> <span class="token operator">=&gt;</span> <span class="token symbol">:java</span><span class="token punctuation">,</span> <span class="token string-literal"><span class="token string">'dhh'</span></span> <span class="token operator">=&gt;</span> <span class="token symbol">:ruby</span><span class="token punctuation">}</span>
 designers <span class="token operator">=</span> data<span class="token punctuation">.</span>to_a<span class="token punctuation">.</span>map <span class="token punctuation">{</span> <span class="token operator">|</span>name<span class="token punctuation">,</span> lang<span class="token operator">|</span> Designer<span class="token punctuation">[</span>name<span class="token punctuation">,</span> lang<span class="token punctuation">]</span> <span class="token punctuation">}</span>

 designers <span class="token comment"># =&gt; [#&lt;struct Designer name=&quot;matz&quot;, lang=:ruby&gt;, #&lt;struct Designer name=&quot;kay&quot;, lang=:smalltalk&gt;, #&lt;struct Designer name=&quot;gosling&quot;, lang=:java&gt;, #&lt;struct Designer name=&quot;dhh&quot;, lang=:ruby&gt;]</span>

 designers<span class="token punctuation">.</span>uniq<span class="token punctuation">.</span>map<span class="token punctuation">(</span><span class="token operator">&amp;</span><span class="token symbol">:name</span><span class="token punctuation">)</span> <span class="token comment"># =&gt; [&quot;matz&quot;, &quot;kay&quot;, &quot;gosling&quot;, &quot;dhh&quot;]</span>
 designers<span class="token punctuation">.</span>uniq<span class="token punctuation">{</span> <span class="token operator">|</span>d<span class="token operator">|</span> d<span class="token punctuation">.</span>lang <span class="token punctuation">}</span><span class="token punctuation">.</span>map<span class="token punctuation">(</span><span class="token operator">&amp;</span><span class="token symbol">:name</span><span class="token punctuation">)</span> <span class="token comment"># =&gt; [&quot;matz&quot;, &quot;kay&quot;, &quot;gosling&quot;]</span>
</code></pre></div><p>아, 그렇죠. No 19의 정답은 &quot;142435&quot;입니다.</p> <h2 id="_21-모든-배열-요소의-동일-여부-확인"><a href="#_21-모든-배열-요소의-동일-여부-확인" class="header-anchor">#</a> 21. 모든 배열 요소의 동일 여부 확인</h2> <p>배열의 모든 요소가 같은지 확인할 때 Array#uniq 메소드를 사용할 수 있습니다.</p> <div class="language-ruby extra-class"><pre class="language-ruby"><code><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">.</span>uniq<span class="token punctuation">.</span>size<span class="token operator">==</span><span class="token number">1</span> <span class="token comment"># =&gt; true</span>
<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">.</span>uniq<span class="token punctuation">.</span>size<span class="token operator">==</span><span class="token number">1</span> <span class="token comment"># =&gt; false</span>
</code></pre></div><p>조건을 지정하고 싶을 땐 uniq에 블록을 넘겨주는 방법이 좋습니다.</p> <div class="language-ruby extra-class"><pre class="language-ruby"><code><span class="token string-literal"><span class="token string">%w(street retest setter tester)</span></span><span class="token punctuation">.</span>uniq <span class="token punctuation">{</span> <span class="token operator">|</span>w<span class="token operator">|</span> w<span class="token punctuation">.</span>chars<span class="token punctuation">.</span>sort <span class="token punctuation">}</span><span class="token punctuation">.</span>size<span class="token operator">==</span><span class="token number">1</span> <span class="token comment"># =&gt; true</span>
</code></pre></div><h2 id="_22-문자열-리스트-w"><a href="#_22-문자열-리스트-w" class="header-anchor">#</a> 22. 문자열 리스트 %w</h2> <p>문자열 리스트를 만들 때 %w를 사용하면 편리합니다. 이 때 공백 문자를 포함하고 싶으면 백슬래시로 이스케이프 해줄 수 있습니다.</p> <div class="language-ruby extra-class"><pre class="language-ruby"><code> designers <span class="token operator">=</span> <span class="token string-literal"><span class="token string">%w(John\ McCarthy Yukihiro\ Matsumoto Larry\ Wall Alan\ Kay Martin\ Odersky)</span></span>
 designers <span class="token comment"># =&gt; [&quot;John McCarthy&quot;, &quot;Yukihiro Matsumoto&quot;, &quot;Larry Wall&quot;, &quot;Alan Kay&quot;, &quot;Martin Odersky&quot;]</span>
</code></pre></div><h2 id="_23-동적-상속"><a href="#_23-동적-상속" class="header-anchor">#</a> 23. 동적 상속</h2> <p>Ruby 클래스의 상속은 <code>&lt;</code> 기호를 사용하는데 이때 우변에 클래스 상수나 클래스를 리턴하는 식을 지정할 수 있습니다.</p> <div class="language-ruby extra-class"><pre class="language-ruby"><code> <span class="token keyword">class</span> <span class="token class-name">Male</span>
  <span class="token keyword">def</span> <span class="token method-definition"><span class="token function">laugh</span></span>
    <span class="token string-literal"><span class="token string">'Ha ha ha!'</span></span>
  <span class="token keyword">end</span>
 <span class="token keyword">end</span>

 <span class="token keyword">class</span> <span class="token class-name">Female</span>
  <span class="token keyword">def</span> <span class="token method-definition"><span class="token function">laugh</span></span>
    <span class="token string-literal"><span class="token string">'Fu fu fu..'</span></span>
  <span class="token keyword">end</span>
 <span class="token keyword">end</span>

 <span class="token keyword">class</span> <span class="token class-name">Me</span> <span class="token operator">&lt;</span> <span class="token punctuation">[</span>Male<span class="token punctuation">,</span> Female<span class="token punctuation">]</span><span class="token punctuation">[</span>rand <span class="token number">2</span><span class="token punctuation">]</span>
 <span class="token keyword">end</span>

 Me<span class="token punctuation">.</span>superclass <span class="token comment"># =&gt; Female</span>
 <span class="token class-name">Me</span><span class="token punctuation">.</span><span class="token keyword">new</span><span class="token punctuation">.</span>laugh <span class="token comment"># =&gt; 'Fu fu fu..'</span>
</code></pre></div><p>환경에 따라 IO를 바꾸는 예제입니다.</p> <div class="language-ruby extra-class"><pre class="language-ruby"><code> <span class="token keyword">def</span> <span class="token method-definition"><span class="token function">io</span></span><span class="token punctuation">(</span>env<span class="token operator">=</span><span class="token symbol">:development</span><span class="token punctuation">)</span>
   env<span class="token operator">==</span><span class="token symbol">:test</span> <span class="token operator">?</span>StringIO <span class="token operator">:</span> <span class="token builtin">IO</span>
 <span class="token keyword">end</span>

 env <span class="token operator">=</span> <span class="token symbol">:test</span>

 <span class="token keyword">class</span> <span class="token class-name">MyIO</span> <span class="token operator">&lt;</span> io<span class="token punctuation">(</span>env<span class="token punctuation">)</span>
 <span class="token keyword">end</span>

 MyIO<span class="token punctuation">.</span>superclass <span class="token comment">#=&gt; StringIO</span>
</code></pre></div><p>즉 Ruby에서는 조건에 따라 상속하려는 클래스를 동적으로 바꿀 수 있습니다.</p> <h2 id="_24-대문자-메소드"><a href="#_24-대문자-메소드" class="header-anchor">#</a> 24. 대문자 메소드</h2> <p>Ruby는 메소드 이름으로 영어 소문자를 사용하는데 영어 대문자도 사용할
수 있습니다. 대문자 메소드는 상수처럼 보이기도 합니다.</p> <div class="language-ruby extra-class"><pre class="language-ruby"><code> <span class="token keyword">class</span> <span class="token class-name">Google</span>
   <span class="token keyword">def</span> <span class="token method-definition"><span class="token function">URL</span></span>
     <span class="token string-literal"><span class="token string">'www.google.com'</span></span>
   <span class="token keyword">end</span>
   <span class="token keyword">private</span> <span class="token symbol">:URL</span>

   <span class="token keyword">def</span> <span class="token method-definition"><span class="token function">search</span></span><span class="token punctuation">(</span>word<span class="token punctuation">)</span>
     get<span class="token punctuation">(</span> <span class="token constant">URL</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> word<span class="token punctuation">)</span>
   <span class="token keyword">end</span>
 <span class="token keyword">end</span>
</code></pre></div><p>상수는 속상된 서브 클래스에서도 참조 가능하지만 이를 비공개로 하고
싶을 때는 어떨까요. 바로 이럴 때 대문자 메소드를 이용해보는 겁니다.</p> <p>인수가 없을 때도 괄호가 생략 불가능한 단점은 있지만, 관련된 복잡한 상수를 정의할 때도 편리하게 사용할 수 있습니다.</p> <div class="language-ruby extra-class"><pre class="language-ruby"><code> <span class="token keyword">class</span> <span class="token class-name">Google</span>
   <span class="token keyword">def</span> <span class="token method-definition"><span class="token function">search</span></span><span class="token punctuation">(</span>word<span class="token punctuation">,</span> code<span class="token operator">=</span><span class="token symbol">:us</span><span class="token punctuation">)</span>
     get<span class="token punctuation">(</span> <span class="token constant">URL</span><span class="token punctuation">(</span>code<span class="token punctuation">)</span><span class="token punctuation">,</span> word <span class="token punctuation">)</span>
   <span class="token keyword">end</span>

   <span class="token keyword">def</span> <span class="token method-definition"><span class="token function">URL</span></span><span class="token punctuation">(</span>code<span class="token punctuation">)</span>
     <span class="token punctuation">{</span> <span class="token symbol">us</span><span class="token operator">:</span> <span class="token string-literal"><span class="token string">'www.google.com'</span></span><span class="token punctuation">,</span>
       <span class="token symbol">ja</span><span class="token operator">:</span> <span class="token string-literal"><span class="token string">'www.google.co.jp'</span></span> <span class="token punctuation">}</span><span class="token punctuation">[</span>code<span class="token punctuation">]</span>
   <span class="token keyword">end</span>
   <span class="token keyword">private</span> <span class="token symbol">:URL</span>
</code></pre></div><p>「상수 메소드」라는 이름은 어떨까요.</p> <h2 id="_25-함수-부분-적용"><a href="#_25-함수-부분-적용" class="header-anchor">#</a> 25. 함수 부분 적용</h2> <p>비슷한 메소드를 여러번 만드는 건 DRY 원칙에 위배됩니다.<code>Proc#curry</code>를
사용하면 이러한 문제를 피할 수 있습니다. 계절 판정 예제입니다.</p> <div class="language-ruby extra-class"><pre class="language-ruby"><code> <span class="token keyword">require</span> <span class="token string-literal"><span class="token string">&quot;date&quot;</span></span>

 season <span class="token operator">=</span> <span class="token operator">-</span><span class="token operator">&gt;</span>range<span class="token punctuation">,</span>date<span class="token punctuation">{</span> range<span class="token punctuation">.</span><span class="token keyword">include</span><span class="token operator">?</span>Date<span class="token punctuation">.</span>parse<span class="token punctuation">(</span>date<span class="token punctuation">)</span><span class="token punctuation">.</span>mon <span class="token punctuation">}</span><span class="token punctuation">.</span>curry

 is_spring <span class="token operator">=</span> season<span class="token punctuation">[</span><span class="token number">4.</span><span class="token number">.6</span><span class="token punctuation">]</span>
 is_summer <span class="token operator">=</span> season<span class="token punctuation">[</span><span class="token number">7.</span><span class="token number">.9</span><span class="token punctuation">]</span>
 is_autumn <span class="token operator">=</span> season<span class="token punctuation">[</span><span class="token number">10.</span><span class="token number">.12</span><span class="token punctuation">]</span>
 is_winter <span class="token operator">=</span> season<span class="token punctuation">[</span><span class="token number">1.</span><span class="token number">.3</span><span class="token punctuation">]</span>

 is_autumn<span class="token punctuation">[</span><span class="token string-literal"><span class="token string">'11/23'</span></span><span class="token punctuation">]</span> <span class="token comment"># =&gt; true</span>
 is_summer<span class="token punctuation">[</span><span class="token string-literal"><span class="token string">'1/1'</span></span><span class="token punctuation">]</span> <span class="token comment"># =&gt; false</span>
</code></pre></div><p>이럴 때 변수명에 <code>?</code>를 사용할 수 있으면 좋겠다는 생각을 해봅니다.</p> <h2 id="_26-proc에-의한-case-조건"><a href="#_26-proc에-의한-case-조건" class="header-anchor">#</a> 26. Proc에 의한 case 조건</h2> <p>Proc은 call 메소드를 사용해 실행할 수 있는데 이 메소드는
<code>Proc#===</code>라는 다른 이름을 가지고 있습니다. 앞선 계절 판정 함수를 case
식으로 작성하면 아래와 같습니다.</p> <div class="language-ruby extra-class"><pre class="language-ruby"><code> <span class="token keyword">for</span> date <span class="token keyword">in</span> <span class="token string-literal"><span class="token string">%w(2/4 11/23 6/14 8/3)</span></span>
   act <span class="token operator">=</span>
     <span class="token keyword">case</span> date
     <span class="token keyword">when</span> is_spring<span class="token punctuation">;</span> <span class="token string-literal"><span class="token string">'Wake up!'</span></span>
     <span class="token keyword">when</span> is_summer<span class="token punctuation">;</span> <span class="token string-literal"><span class="token string">'Cool down!'</span></span>
     <span class="token keyword">when</span> is_autumn<span class="token punctuation">;</span> <span class="token string-literal"><span class="token string">'Read!'</span></span>
     <span class="token keyword">when</span> is_winter<span class="token punctuation">;</span> <span class="token string-literal"><span class="token string">'Sleep!'</span></span>
     <span class="token keyword">end</span>
   puts <span class="token string-literal"><span class="token string">&quot;</span><span class="token interpolation"><span class="token delimiter punctuation">#{</span><span class="token content">date</span><span class="token delimiter punctuation">}</span></span><span class="token string"> =&gt; </span><span class="token interpolation"><span class="token delimiter punctuation">#{</span><span class="token content">act</span><span class="token delimiter punctuation">}</span></span><span class="token string">&quot;</span></span>
 <span class="token keyword">end</span>
 <span class="token comment"># &gt;&gt; 2/4 =&gt; Sleep! # &gt;&gt; 11/23 =&gt; Read! # &gt;&gt; 6/14 =&gt; Wake up! # &gt;&gt; 8/3 =&gt; Cool down!</span>
</code></pre></div><p>인수가 넘어가는 게 암묵적으로 이루어져서 case 식이 깔끔하게 느껴집니다.</p> <h2 id="_27-struct-클래스"><a href="#_27-struct-클래스" class="header-anchor">#</a> 27. Struct 클래스</h2> <p>속성만 있는 클래스를 생성할 때는 <code>Struct</code>가 편리합니다.</p> <div class="language-ruby extra-class"><pre class="language-ruby"><code> <span class="token keyword">module</span> <span class="token class-name">Fortune</span>
   <span class="token keyword">class</span> <span class="token class-name">Teller</span>
     <span class="token keyword">require</span> <span class="token string-literal"><span class="token string">&quot;date&quot;</span></span>
     <span class="token keyword">def</span> <span class="token method-definition"><span class="token keyword">self</span><span class="token punctuation">.</span><span class="token function">ask</span></span><span class="token punctuation">(</span>name<span class="token punctuation">,</span> age<span class="token punctuation">,</span> occupation<span class="token punctuation">)</span>
       Date<span class="token punctuation">.</span>today<span class="token punctuation">.</span>next_day<span class="token punctuation">(</span>rand <span class="token number">10</span><span class="token punctuation">)</span>
     <span class="token keyword">end</span>
   <span class="token keyword">end</span>
 <span class="token keyword">end</span>

 <span class="token keyword">class</span> <span class="token class-name">Person</span> <span class="token operator">&lt;</span> <span class="token class-name">Struct</span><span class="token punctuation">.</span><span class="token keyword">new</span><span class="token punctuation">(</span><span class="token symbol">:name</span><span class="token punctuation">,</span> <span class="token symbol">:age</span><span class="token punctuation">,</span> <span class="token symbol">:occupation</span><span class="token punctuation">)</span>
   <span class="token keyword">def</span> <span class="token method-definition"><span class="token function">length_of_life</span></span><span class="token punctuation">(</span>date<span class="token punctuation">)</span>
     <span class="token punctuation">(</span>Fortune<span class="token double-colon punctuation">::</span>Teller<span class="token punctuation">.</span>ask<span class="token punctuation">(</span>name<span class="token punctuation">,</span> age<span class="token punctuation">,</span> occupation<span class="token punctuation">)</span> <span class="token operator">-</span> Date<span class="token punctuation">.</span>parse<span class="token punctuation">(</span>date<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">.</span>to_i
   <span class="token keyword">end</span>
 <span class="token keyword">end</span>

 charlie <span class="token operator">=</span> <span class="token class-name">Person</span><span class="token punctuation">.</span><span class="token keyword">new</span><span class="token punctuation">(</span><span class="token string-literal"><span class="token string">'charlie'</span></span><span class="token punctuation">,</span> <span class="token number">13</span><span class="token punctuation">,</span> <span class="token symbol">:programmer</span><span class="token punctuation">)</span>
 charlie<span class="token punctuation">.</span>length_of_life<span class="token punctuation">(</span><span class="token string-literal"><span class="token string">'2013/3/1'</span></span><span class="token punctuation">)</span> <span class="token comment"># =&gt; 6</span>
</code></pre></div><p>Struct.new는 블록을 받을 수 있어 아래와 같이 사용할 수도 있습니다.</p> <div class="language-ruby extra-class"><pre class="language-ruby"><code> Person <span class="token operator">=</span> <span class="token class-name">Struct</span><span class="token punctuation">.</span><span class="token keyword">new</span><span class="token punctuation">(</span><span class="token symbol">:name</span><span class="token punctuation">,</span> <span class="token symbol">:age</span><span class="token punctuation">,</span> <span class="token symbol">:occupation</span><span class="token punctuation">)</span> <span class="token keyword">do</span>
   <span class="token keyword">def</span> <span class="token method-definition"><span class="token function">length_of_life</span></span><span class="token punctuation">(</span>date<span class="token punctuation">)</span>
     <span class="token punctuation">(</span>Fortune<span class="token double-colon punctuation">::</span>Teller<span class="token punctuation">.</span>ask<span class="token punctuation">(</span>name<span class="token punctuation">,</span> age<span class="token punctuation">,</span> occupation<span class="token punctuation">)</span> <span class="token operator">-</span> Date<span class="token punctuation">.</span>parse<span class="token punctuation">(</span>date<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">.</span>to_i
   <span class="token keyword">end</span>
 <span class="token keyword">end</span>

 charlie <span class="token operator">=</span> <span class="token class-name">Person</span><span class="token punctuation">.</span><span class="token keyword">new</span><span class="token punctuation">(</span><span class="token string-literal"><span class="token string">'charlie'</span></span><span class="token punctuation">,</span> <span class="token number">13</span><span class="token punctuation">,</span> <span class="token symbol">:programmer</span><span class="token punctuation">)</span>
 charlie<span class="token punctuation">.</span>length_of_life<span class="token punctuation">(</span><span class="token string-literal"><span class="token string">'2013/3/1'</span></span><span class="token punctuation">)</span> <span class="token comment"># =&gt; 3</span>
</code></pre></div><h2 id="_28-struct의-기본-값"><a href="#_28-struct의-기본-값" class="header-anchor">#</a> 28. Struct의 기본 값</h2> <p>한 번 더 Struct 이야기입니다. 이번엔 Beverage 객체를 만들어 보겠습니다.</p> <div class="language-ruby extra-class"><pre class="language-ruby"><code><span class="token keyword">class</span> <span class="token class-name">Beverage</span> <span class="token operator">&lt;</span> <span class="token class-name">Struct</span><span class="token punctuation">.</span><span class="token keyword">new</span><span class="token punctuation">(</span><span class="token symbol">:name</span><span class="token punctuation">,</span> <span class="token symbol">:cost</span><span class="token punctuation">)</span>
<span class="token keyword">end</span>

<span class="token comment"># 혹은 Beverage = Struct.new(:name, :cost)</span>

starbucks <span class="token operator">=</span> <span class="token class-name">Beverage</span><span class="token punctuation">.</span><span class="token keyword">new</span><span class="token punctuation">(</span><span class="token symbol">:staba</span><span class="token punctuation">,</span> <span class="token number">430</span><span class="token punctuation">)</span> <span class="token comment"># =&gt; #&lt;struct Beverage name=:staba, cost=430&gt;</span>
heineken <span class="token operator">=</span> <span class="token class-name">Beverage</span><span class="token punctuation">.</span><span class="token keyword">new</span><span class="token punctuation">(</span><span class="token symbol">:heineken</span><span class="token punctuation">,</span> <span class="token number">580</span><span class="token punctuation">)</span> <span class="token comment"># =&gt; #&lt;struct Beverage name=:heineken, cost=580&gt;</span>
</code></pre></div><p>여기서 <code>new</code>에 인수를 넘기지 않으면 속성값에는 nil이 지정됩니다.</p> <div class="language-ruby extra-class"><pre class="language-ruby"><code><span class="token class-name">Beverage</span><span class="token punctuation">.</span><span class="token keyword">new</span> <span class="token comment"># =&gt; #&lt;struct Beverage name=nil, cost=nil&gt;</span>
</code></pre></div><p>가능하면 클래스와 마찬가지로 기본 값을 설정하고 싶죠. 그럴 땐 이렇게 합니다.</p> <div class="language-ruby extra-class"><pre class="language-ruby"><code><span class="token keyword">class</span> <span class="token class-name">Beverage</span> <span class="token operator">&lt;</span> <span class="token class-name">Struct</span><span class="token punctuation">.</span><span class="token keyword">new</span><span class="token punctuation">(</span><span class="token symbol">:name</span><span class="token punctuation">,</span> <span class="token symbol">:cost</span><span class="token punctuation">)</span>
  <span class="token keyword">def</span> <span class="token method-definition"><span class="token function">initialize</span></span><span class="token punctuation">(</span>name<span class="token operator">=</span><span class="token symbol">:water</span><span class="token punctuation">,</span> cost<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">)</span>
    <span class="token keyword">super</span><span class="token punctuation">(</span>name<span class="token punctuation">,</span> cost<span class="token punctuation">)</span>
  <span class="token keyword">end</span>
<span class="token keyword">end</span>

starbucks <span class="token operator">=</span> <span class="token class-name">Beverage</span><span class="token punctuation">.</span><span class="token keyword">new</span><span class="token punctuation">(</span><span class="token symbol">:staba</span><span class="token punctuation">,</span> <span class="token number">430</span><span class="token punctuation">)</span> <span class="token comment"># =&gt; #&lt;struct Beverage name=:staba, cost=430&gt;</span>
heineken <span class="token operator">=</span> <span class="token class-name">Beverage</span><span class="token punctuation">.</span><span class="token keyword">new</span><span class="token punctuation">(</span><span class="token symbol">:heineken</span><span class="token punctuation">,</span> <span class="token number">580</span><span class="token punctuation">)</span> <span class="token comment"># =&gt; #&lt;struct Beverage name=:heineken, cost=580&gt;</span>

water <span class="token operator">=</span> <span class="token class-name">Beverage</span><span class="token punctuation">.</span><span class="token keyword">new</span> <span class="token comment"># =&gt; #&lt;struct Beverage name=:water, cost=0&gt;</span>
</code></pre></div><h2 id="_29-retry와-인수-기본값"><a href="#_29-retry와-인수-기본값" class="header-anchor">#</a> 29. retry와 인수 기본값</h2> <p>rescue를 사용할 때는 <code>retry</code>를 사용해서 메소드를 재실행할 수 있습니다.
이를 메소드 인수의 기본 값과 연관지어 편리하게 사용할 수 있습니다.</p> <div class="language-ruby extra-class"><pre class="language-ruby"><code> <span class="token keyword">require</span> <span class="token string-literal"><span class="token string">&quot;date&quot;</span></span>
 <span class="token keyword">def</span> <span class="token method-definition"><span class="token function">last_date</span></span><span class="token punctuation">(</span>date<span class="token punctuation">,</span> last<span class="token operator">=</span><span class="token punctuation">[</span><span class="token number">28</span><span class="token punctuation">,</span><span class="token number">29</span><span class="token punctuation">,</span><span class="token number">30</span><span class="token punctuation">,</span><span class="token number">31</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
   d <span class="token operator">=</span> Date<span class="token punctuation">.</span>parse date
   <span class="token class-name">Date</span><span class="token punctuation">.</span><span class="token keyword">new</span><span class="token punctuation">(</span>d<span class="token punctuation">.</span>year<span class="token punctuation">,</span> d<span class="token punctuation">.</span>mon<span class="token punctuation">,</span> last<span class="token punctuation">.</span>pop<span class="token punctuation">)</span><span class="token punctuation">.</span>day <span class="token keyword">rescue</span> <span class="token keyword">retry</span>
 <span class="token keyword">end</span>

 last_date <span class="token string-literal"><span class="token string">'2013/6/1'</span></span> <span class="token comment"># =&gt; 30</span>
 last_date <span class="token string-literal"><span class="token string">'2012/2/20'</span></span> <span class="token comment"># =&gt; 29</span>
 last_date <span class="token string-literal"><span class="token string">'2013/2'</span></span> <span class="token comment"># =&gt; 28</span>
</code></pre></div><p>이 예제에서는 31일부터 Date 객체를 생성해 예외가 발생하면 retry를 통해 전 날의 Date객체 생성을 시도합니다.</p> <p>사실 마지막 날이 알고 싶은 거면 아래 코드면 충분합니다만...</p> <div class="language-ruby extra-class"><pre class="language-ruby"><code> <span class="token class-name">Date</span><span class="token punctuation">.</span><span class="token keyword">new</span><span class="token punctuation">(</span><span class="token number">2013</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">.</span>day <span class="token comment"># =&gt; 28</span>
</code></pre></div><h2 id="_30-array-zip"><a href="#_30-array-zip" class="header-anchor">#</a> 30. Array#zip</h2> <p><code>Array#zip</code>을 알고계시나요?여러개의 배열을 한 줄 한 줄 늘여놓고 열단위로 묶어주는 메소드입니다.</p> <div class="language-ruby extra-class"><pre class="language-ruby"><code><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">]</span><span class="token punctuation">.</span>zip<span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token number">4</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">,</span> <span class="token number">6</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token number">7</span><span class="token punctuation">,</span> <span class="token number">8</span><span class="token punctuation">,</span> <span class="token number">9</span><span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token comment"># =&gt; [[1, 4, 7], [2, 5, 8], [3, 6, 9]]</span>

<span class="token punctuation">[</span><span class="token symbol">:A</span><span class="token punctuation">,</span> <span class="token symbol">:B</span><span class="token punctuation">,</span> <span class="token symbol">:C</span><span class="token punctuation">]</span><span class="token punctuation">.</span>zip<span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token symbol">:E</span><span class="token punctuation">,</span> <span class="token symbol">:F</span><span class="token punctuation">,</span> <span class="token symbol">:G</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token symbol">:H</span><span class="token punctuation">,</span> <span class="token symbol">:I</span><span class="token punctuation">,</span> <span class="token symbol">:J</span><span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token comment"># =&gt; [[:A, :E, :H], [:B, :F, :I], [:C, :G, :J]]</span>
</code></pre></div><p>zip은 일반적으로 하나나 그보다 많은 배열들을 인수로 받는데 값이 연속되는 경우엔 Range를 사용할 수 있습니다.</p> <div class="language-ruby extra-class"><pre class="language-ruby"><code><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">]</span><span class="token punctuation">.</span>zip<span class="token punctuation">(</span><span class="token number">4.</span><span class="token number">.6</span><span class="token punctuation">,</span> <span class="token number">7.</span><span class="token number">.9</span><span class="token punctuation">)</span> <span class="token comment"># =&gt; [[1, 4, 7], [2, 5, 8], [3, 6, 9]]</span>

<span class="token punctuation">[</span><span class="token symbol">:A</span><span class="token punctuation">,</span> <span class="token symbol">:B</span><span class="token punctuation">,</span> <span class="token symbol">:C</span><span class="token punctuation">]</span><span class="token punctuation">.</span>zip<span class="token punctuation">(</span><span class="token symbol">:E</span><span class="token operator">..</span><span class="token symbol">:G</span><span class="token punctuation">,</span> <span class="token symbol">:H</span><span class="token operator">..</span><span class="token symbol">:J</span><span class="token punctuation">)</span> <span class="token comment"># =&gt; [[:A, :E, :H], [:B, :F, :I], [:C, :G, :J]]</span>
</code></pre></div><p>또한 zip은 블록을 넘겨받을 수 있습니다.</p> <div class="language-ruby extra-class"><pre class="language-ruby"><code><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">]</span><span class="token punctuation">.</span>zip<span class="token punctuation">(</span><span class="token number">4.</span><span class="token number">.6</span><span class="token punctuation">,</span> <span class="token number">7.</span><span class="token number">.9</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token operator">|</span>xyz<span class="token operator">|</span> puts xyz<span class="token punctuation">.</span>inject<span class="token punctuation">(</span><span class="token operator">:</span><span class="token operator">+</span><span class="token punctuation">)</span> <span class="token punctuation">}</span> <span class="token comment"># =&gt; nil</span>
<span class="token comment"># &gt;&gt; 12</span>
<span class="token comment"># &gt;&gt; 15</span>
<span class="token comment"># &gt;&gt; 18</span>

<span class="token punctuation">[</span><span class="token symbol">:A</span><span class="token punctuation">,</span> <span class="token symbol">:B</span><span class="token punctuation">,</span> <span class="token symbol">:C</span><span class="token punctuation">]</span><span class="token punctuation">.</span>zip<span class="token punctuation">(</span><span class="token symbol">:E</span><span class="token operator">..</span><span class="token symbol">:G</span><span class="token punctuation">,</span> <span class="token symbol">:H</span><span class="token operator">..</span><span class="token symbol">:J</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token operator">|</span>xyz<span class="token operator">|</span> puts xyz<span class="token punctuation">.</span>join <span class="token punctuation">}</span> <span class="token comment"># =&gt; nil</span>
<span class="token comment"># &gt;&gt; AEH</span>
<span class="token comment"># &gt;&gt; BFI</span>
<span class="token comment"># &gt;&gt; CGJ</span>
</code></pre></div><p>단 리턴값은 nil이므로 블록에서 처리하는 방법으로밖에 사용할 수 없습니다.</p> <h2 id="_31-enumerable-zip"><a href="#_31-enumerable-zip" class="header-anchor">#</a> 31. Enumerable#zip</h2> <p>zip 메소드는 Enumerable 클래스에도 있습니다.</p> <div class="language-ruby extra-class"><pre class="language-ruby"><code><span class="token punctuation">(</span><span class="token number">1.</span><span class="token number">.3</span><span class="token punctuation">)</span><span class="token punctuation">.</span>zip<span class="token punctuation">(</span><span class="token number">4.</span><span class="token number">.6</span><span class="token punctuation">,</span> <span class="token number">7.</span><span class="token number">.9</span><span class="token punctuation">)</span> <span class="token comment"># =&gt; [[1, 4, 7], [2, 5, 8], [3, 6, 9]]</span>

<span class="token punctuation">(</span><span class="token symbol">:A</span><span class="token operator">..</span><span class="token symbol">:C</span><span class="token punctuation">)</span><span class="token punctuation">.</span>zip<span class="token punctuation">(</span><span class="token symbol">:E</span><span class="token operator">..</span><span class="token symbol">:G</span><span class="token punctuation">,</span> <span class="token symbol">:H</span><span class="token operator">..</span><span class="token symbol">:J</span><span class="token punctuation">)</span> <span class="token comment"># =&gt; [[:A, :E, :H], [:B, :F, :I], [:C, :G, :J]]</span>
</code></pre></div><p>Struct도 Enumerable 객체이므로 아래와 같은 것도 가능합니다.</p> <div class="language-ruby extra-class"><pre class="language-ruby"><code>water <span class="token operator">=</span> <span class="token class-name">Beverage</span><span class="token punctuation">.</span><span class="token keyword">new</span>  <span class="token comment"># =&gt; #&lt;struct Beverage name=:water, cost=0&gt;</span>
starbucks <span class="token operator">=</span> <span class="token class-name">Beverage</span><span class="token punctuation">.</span><span class="token keyword">new</span><span class="token punctuation">(</span><span class="token symbol">:staba</span><span class="token punctuation">,</span> <span class="token number">430</span><span class="token punctuation">)</span> <span class="token comment"># =&gt; #&lt;struct Beverage name=:staba, cost=430&gt;</span>
heineken <span class="token operator">=</span> <span class="token class-name">Beverage</span><span class="token punctuation">.</span><span class="token keyword">new</span><span class="token punctuation">(</span><span class="token symbol">:heineken</span><span class="token punctuation">,</span> <span class="token number">580</span><span class="token punctuation">)</span> <span class="token comment"># =&gt; #&lt;struct Beverage name=:heineken, cost=580&gt;</span>

water<span class="token punctuation">.</span>zip<span class="token punctuation">(</span>starbucks<span class="token punctuation">,</span> heineken<span class="token punctuation">)</span> <span class="token comment"># =&gt; [[:water, :staba, :heineken], [0, 430, 580]]</span>
</code></pre></div><h2 id="_32-argf"><a href="#_32-argf" class="header-anchor">#</a> 32. ARGF</h2> <p>ARGF는 훌륭합니다. 이는 커맨드 라인 인수를 파일명으로 받아들여 지정된
파일 객체를 가져옵니다. 그런데 이 객체의 클래스가 뭔지 알고계시나요? 이를 확인하려면 class 메소드를 보내보면 되겠죠.</p> <div class="language-ruby extra-class"><pre class="language-ruby"><code><span class="token constant">ARGF</span><span class="token punctuation">.</span><span class="token keyword">class</span> <span class="token comment"># =&gt; ARGF.class</span>
</code></pre></div><p>네. 정답은 <code>ARGF.class</code>입니다.</p> <p>그럼 new 하면 ARGF가 만들어질까요.</p> <div class="language-ruby extra-class"><pre class="language-ruby"><code><span class="token constant">ARGF</span><span class="token punctuation">.</span><span class="token keyword">class</span> <span class="token comment"># =&gt; ARGF.class</span>
<span class="token constant">MYARGF</span> <span class="token operator">=</span> <span class="token constant">ARGF</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">.</span><span class="token keyword">new</span>  <span class="token comment"># =&gt; ARGF</span>
<span class="token constant">MYARGF</span><span class="token punctuation">.</span><span class="token keyword">class</span> <span class="token comment"># =&gt; ARGF.class</span>

puts <span class="token constant">MYARGF</span><span class="token punctuation">.</span>filename
</code></pre></div><p>만들어집니다! 하지만 제대로 작동하지 않습니다.</p> <div class="language-sh extra-class"><pre class="language-sh"><code>% ruby argf_test.rb abc.txt
-
</code></pre></div><p>칫!</p> <h2 id="_33-object-tap"><a href="#_33-object-tap" class="header-anchor">#</a> 33. Object#tap</h2> <p><code>tap</code>은 이 블록의 평가 결과를 버리는 희안한 메소드인데 그 결과가
필요할 때가 있습니다. 그럴 땐 break를 사용하면 됩니다. (thanks to knu 님).</p> <div class="language-ruby extra-class"><pre class="language-ruby"><code>average <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">56</span><span class="token punctuation">,</span> <span class="token number">87</span><span class="token punctuation">,</span> <span class="token number">49</span><span class="token punctuation">,</span> <span class="token number">75</span><span class="token punctuation">,</span> <span class="token number">90</span><span class="token punctuation">,</span> <span class="token number">63</span><span class="token punctuation">,</span> <span class="token number">65</span><span class="token punctuation">]</span><span class="token punctuation">.</span>tap <span class="token punctuation">{</span> <span class="token operator">|</span>sco<span class="token operator">|</span> <span class="token keyword">break</span> sco<span class="token punctuation">.</span>inject<span class="token punctuation">(</span><span class="token operator">:</span><span class="token operator">+</span><span class="token punctuation">)</span> <span class="token operator">/</span> sco<span class="token punctuation">.</span>size <span class="token punctuation">}</span> <span class="token comment"># =&gt; 69</span>
</code></pre></div><p>컵라면을 좋아하는 당신께 아래의 코드를 헌정합니다.</p> <div class="language-ruby extra-class"><pre class="language-ruby"><code>puts <span class="token string-literal"><span class="token string">&quot;Eat!&quot;</span></span><span class="token punctuation">.</span>tap <span class="token punctuation">{</span> sleep <span class="token number">180</span> <span class="token punctuation">}</span> <span class="token comment"># 3분 후에 'Eat!'</span>
</code></pre></div><h2 id="_34-사용하지-않는-변수"><a href="#_34-사용하지-않는-변수" class="header-anchor">#</a> 34. 사용하지 않는 변수</h2> <p>배열 데이터를 그냥 버리고 싶을 때가 있죠.</p> <div class="language-ruby extra-class"><pre class="language-ruby"><code>header<span class="token punctuation">,</span> <span class="token operator">*</span>data <span class="token operator">=</span> <span class="token constant">DATA</span><span class="token punctuation">.</span>each_line<span class="token punctuation">.</span>map <span class="token punctuation">{</span> <span class="token operator">|</span>line<span class="token operator">|</span> line<span class="token punctuation">.</span>chomp<span class="token punctuation">.</span>split <span class="token punctuation">}</span>
header <span class="token comment"># =&gt; [&quot;name&quot;, &quot;age&quot;, &quot;job&quot;]</span>
data <span class="token comment"># =&gt; [[&quot;charlie&quot;, &quot;12&quot;, &quot;:programmer&quot;], [&quot;tommy&quot;, &quot;17&quot;, &quot;:student&quot;], [&quot;nick&quot;, &quot;27&quot;, &quot;:doctor&quot;]]</span>

__END__
name age job
charlie <span class="token number">12</span> <span class="token symbol">:programmer</span>
tommy <span class="token number">17</span> <span class="token symbol">:student</span>
nick <span class="token number">27</span> <span class="token symbol">:doctor</span>
</code></pre></div><p>그런데 여기서 <code>header</code> 변수를 사용하지 않으면 경고가 나옵니다.</p> <div class="language-ruby extra-class"><pre class="language-ruby"><code>header<span class="token punctuation">,</span> <span class="token operator">*</span>data <span class="token operator">=</span> <span class="token constant">DATA</span><span class="token punctuation">.</span>each_line<span class="token punctuation">.</span>map <span class="token punctuation">{</span> <span class="token operator">|</span>line<span class="token operator">|</span> line<span class="token punctuation">.</span>chomp<span class="token punctuation">.</span>split <span class="token punctuation">}</span> <span class="token comment"># !&gt; assigned but unused variable - header</span>
data <span class="token comment"># =&gt; [[&quot;charlie&quot;, &quot;12&quot;, &quot;:programmer&quot;], [&quot;tommy&quot;, &quot;17&quot;, &quot;:student&quot;], [&quot;nick&quot;, &quot;27&quot;, &quot;:doctor&quot;]]</span>
</code></pre></div><p>이를 피하기 위해 변수명을 <code>_</code>(밑줄)로 지정합니다.</p> <div class="language-ruby extra-class"><pre class="language-ruby"><code>_<span class="token punctuation">,</span> <span class="token operator">*</span>data <span class="token operator">=</span> <span class="token constant">DATA</span><span class="token punctuation">.</span>each_line<span class="token punctuation">.</span>map <span class="token punctuation">{</span> <span class="token operator">|</span>line<span class="token operator">|</span> line<span class="token punctuation">.</span>chomp<span class="token punctuation">.</span>split <span class="token punctuation">}</span>
data <span class="token comment"># =&gt; [[&quot;charlie&quot;, &quot;12&quot;, &quot;:programmer&quot;], [&quot;tommy&quot;, &quot;17&quot;, &quot;:student&quot;], [&quot;nick&quot;, &quot;27&quot;, &quot;:doctor&quot;]]</span>
</code></pre></div><p>만약 이미 2.0을 사용하고 계시다면 변수 이름 앞에 <code>_</code>를 붙여주기만 하면 됩니다.</p> <div class="language-ruby extra-class"><pre class="language-ruby"><code>_header<span class="token punctuation">,</span> <span class="token operator">*</span>data <span class="token operator">=</span> <span class="token constant">DATA</span><span class="token punctuation">.</span>each_line<span class="token punctuation">.</span>map <span class="token punctuation">{</span> <span class="token operator">|</span>line<span class="token operator">|</span> line<span class="token punctuation">.</span>chomp<span class="token punctuation">.</span>split <span class="token punctuation">}</span>
</code></pre></div><h2 id="_35-파일-뽑아내기"><a href="#_35-파일-뽑아내기" class="header-anchor">#</a> 35. 파일 뽑아내기</h2> <p>여러 파일이 있을 때 특정한 조건에 맞는 딱 하나의 파일을 찾아내 다른
변수에 저장하고 싶다고 해보죠. <code>Array#delete</code> 메소드를 사용하면 될 것 같은데, 실제론 어떨까요.</p> <div class="language-ruby extra-class"><pre class="language-ruby"><code>files <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token string-literal"><span class="token string">'Gemfile'</span></span><span class="token punctuation">,</span> <span class="token string-literal"><span class="token string">'LICENSE.txt'</span></span><span class="token punctuation">,</span> <span class="token string-literal"><span class="token string">'README.md'</span></span><span class="token punctuation">,</span> <span class="token string-literal"><span class="token string">'Rakefile'</span></span><span class="token punctuation">,</span> <span class="token string-literal"><span class="token string">'bin'</span></span><span class="token punctuation">,</span> <span class="token string-literal"><span class="token string">'lib'</span></span><span class="token punctuation">,</span> <span class="token string-literal"><span class="token string">'maliq.gemspec'</span></span><span class="token punctuation">,</span> <span class="token string-literal"><span class="token string">'pkg'</span></span><span class="token punctuation">,</span> <span class="token string-literal"><span class="token string">'spec'</span></span><span class="token punctuation">]</span>

gemspec <span class="token operator">=</span> files<span class="token punctuation">.</span>delete<span class="token punctuation">(</span><span class="token regex-literal"><span class="token regex">/\.gemspec$/</span></span><span class="token punctuation">)</span>
gemspec <span class="token comment"># =&gt; nil</span>
files <span class="token comment"># =&gt; [&quot;Gemfile&quot;, &quot;LICENSE.txt&quot;, &quot;README.md&quot;, &quot;Rakefile&quot;, &quot;bin&quot;, &quot;lib&quot;, &quot;maliq.gemspec&quot;, &quot;pkg&quot;, &quot;spec&quot;]</span>
</code></pre></div><p>안타깝지만 생각처럼 되지 않습니다. 이는 Array#delete가 <code>==</code>으로 동일 여부를 판단하기 때문입니다.</p> <p>그렇다면 <code>Array#partition</code>과 다중 대입을 사용해보죠.</p> <div class="language-ruby extra-class"><pre class="language-ruby"><code>gemspec<span class="token punctuation">,</span> files <span class="token operator">=</span> files<span class="token punctuation">.</span>partition <span class="token punctuation">{</span> <span class="token operator">|</span>f<span class="token operator">|</span> f<span class="token punctuation">.</span>match<span class="token punctuation">(</span><span class="token regex-literal"><span class="token regex">/\.gemspec$/</span></span><span class="token punctuation">)</span> <span class="token punctuation">}</span>
gemspec <span class="token comment"># =&gt; [&quot;maliq.gemspec&quot;]</span>
files  <span class="token comment"># =&gt; [&quot;Gemfile&quot;, &quot;LICENSE.txt&quot;, &quot;README.md&quot;, &quot;Rakefile&quot;, &quot;bin&quot;, &quot;lib&quot;, &quot;pkg&quot;, &quot;spec&quot;]</span>
</code></pre></div><p>다 된 것 같긴 한데 gemspec 파일을 배열로 돌려주는 게 조금 아쉽네요. 하지만 다중 대입 + 괄호를 사용하면 해결할 수 있습니다.</p> <div class="language-ruby extra-class"><pre class="language-ruby"><code><span class="token punctuation">(</span>gemspec<span class="token punctuation">,</span> <span class="token operator">*</span>_<span class="token punctuation">)</span><span class="token punctuation">,</span> files <span class="token operator">=</span> files<span class="token punctuation">.</span>partition <span class="token punctuation">{</span> <span class="token operator">|</span>f<span class="token operator">|</span> f<span class="token punctuation">.</span>match<span class="token punctuation">(</span><span class="token regex-literal"><span class="token regex">/\.gemspec$/</span></span><span class="token punctuation">)</span> <span class="token punctuation">}</span>
gemspec <span class="token comment"># =&gt; &quot;maliq.gemspec&quot;</span>
files <span class="token comment"># =&gt; [&quot;Gemfile&quot;, &quot;LICENSE.txt&quot;, &quot;README.md&quot;, &quot;Rakefile&quot;, &quot;bin&quot;, &quot;lib&quot;, &quot;pkg&quot;, &quot;spec&quot;]</span>
</code></pre></div><h2 id="_36-symbol에-주석-사용하기"><a href="#_36-symbol에-주석-사용하기" class="header-anchor">#</a> 36. Symbol에 주석 사용하기</h2> <p>심볼에도 주석을 달고 싶다고 생각해보신 적은 없나요? 그렇다면 이렇게 해보세요.</p> <div class="language-ruby extra-class"><pre class="language-ruby"><code>sym <span class="token operator">=</span> <span class="token operator">:</span><span class="token comment">#this symbol is nice</span>
hello

sym <span class="token comment"># =&gt; :hello</span>
</code></pre></div><p>대체 이걸 어디에 쓰시려고...</p> <h2 id="_37-kernel-loop"><a href="#_37-kernel-loop" class="header-anchor">#</a> 37. Kernel#loop</h2> <p>끝없이 반복하고 싶은 경우엔 <code>Kernel#loop</code>에 블록을 넘겨주면 됩니다.</p> <div class="language-ruby extra-class"><pre class="language-ruby"><code> <span class="token keyword">require</span> <span class="token string-literal"><span class="token string">&quot;prime&quot;</span></span>

 prime <span class="token operator">=</span> Prime<span class="token punctuation">.</span><span class="token keyword">each</span>

 n <span class="token operator">=</span> <span class="token number">0</span>
 loop <span class="token keyword">do</span>
   printf <span class="token string-literal"><span class="token string">&quot;%d &quot;</span></span> <span class="token operator">%</span> prime<span class="token punctuation">.</span><span class="token keyword">next</span>
   <span class="token keyword">break</span> <span class="token keyword">if</span> n <span class="token operator">&gt;</span> <span class="token number">10</span>
   n <span class="token operator">+=</span> <span class="token number">1</span>
 <span class="token keyword">end</span>
 <span class="token comment"># &gt;&gt; 2 3 5 7 11 13 17 19 23 29 31 37</span>
</code></pre></div><p>여기선 loop에 블록을 넘기지 않으면 Enumerator가 리턴됩니다. 이를
이용하면 loop에 인덱스를 추가할 수 있습니다.( thanks to @no6v 님)</p> <div class="language-ruby extra-class"><pre class="language-ruby"><code> loop <span class="token comment"># =&gt; #&lt;Enumerator: main:loop&gt;</span>

 loop<span class="token punctuation">.</span>with_index <span class="token keyword">do</span> <span class="token operator">|</span>_<span class="token punctuation">,</span>n<span class="token operator">|</span>
   printf <span class="token string-literal"><span class="token string">&quot;%d &quot;</span></span> <span class="token operator">%</span> prime<span class="token punctuation">.</span><span class="token keyword">next</span>
   <span class="token keyword">break</span> <span class="token keyword">if</span> n <span class="token operator">&gt;</span> <span class="token number">10</span>
 <span class="token keyword">end</span>
 <span class="token comment"># &gt;&gt; 2 3 5 7 11 13 17 19 23 29 31 37</span>
</code></pre></div><p>블록의 첫번째 인수가 nil이 되어버립니다만.</p> <h2 id="_38-basicobject-instance-eval"><a href="#_38-basicobject-instance-eval" class="header-anchor">#</a> 38. BasicObject#instance_eval</h2> <p><code>instance_eval</code>은 객체 생성을 DSL처럼 할 때 자주 사용됩니다.</p> <div class="language-ruby extra-class"><pre class="language-ruby"><code><span class="token keyword">class</span> <span class="token class-name">Person</span>
  <span class="token keyword">def</span> <span class="token method-definition"><span class="token function">initialize</span></span><span class="token punctuation">(</span><span class="token operator">&amp;</span>blk<span class="token punctuation">)</span>
    instance_eval<span class="token punctuation">(</span><span class="token operator">&amp;</span>blk<span class="token punctuation">)</span>
  <span class="token keyword">end</span>
  <span class="token keyword">def</span> <span class="token method-definition"><span class="token function">name</span></span><span class="token punctuation">(</span>name<span class="token punctuation">)</span>
    <span class="token variable">@name</span> <span class="token operator">=</span> name
  <span class="token keyword">end</span>
  <span class="token keyword">def</span> <span class="token method-definition"><span class="token function">age</span></span><span class="token punctuation">(</span>age<span class="token punctuation">)</span>
    <span class="token variable">@age</span> <span class="token operator">=</span> age
  <span class="token keyword">end</span>
  <span class="token keyword">def</span> <span class="token method-definition"><span class="token function">job</span></span><span class="token punctuation">(</span>job<span class="token punctuation">)</span>
    <span class="token variable">@job</span> <span class="token operator">=</span> job
  <span class="token keyword">end</span>
  <span class="token keyword">def</span> <span class="token method-definition"><span class="token function">profile</span></span>
    <span class="token punctuation">[</span><span class="token variable">@name</span><span class="token punctuation">,</span> <span class="token variable">@age</span><span class="token punctuation">,</span> <span class="token variable">@job</span><span class="token punctuation">]</span> <span class="token operator">*</span> <span class="token string-literal"><span class="token string">'-'</span></span>
  <span class="token keyword">end</span>
<span class="token keyword">end</span>

t <span class="token operator">=</span> <span class="token class-name">Person</span><span class="token punctuation">.</span><span class="token keyword">new</span> <span class="token keyword">do</span>
  name <span class="token string-literal"><span class="token string">'Charlie'</span></span>
  age  <span class="token number">13</span>
  job  <span class="token symbol">:programmer</span>
<span class="token keyword">end</span>

t<span class="token punctuation">.</span>profile <span class="token comment"># =&gt; &quot;Charlie-13-programmer&quot;</span>
</code></pre></div><p>하지만 이러한 콘텍스트를 일시적으로 바꾸는 방법은 DSL이 아니라도
편리하게 사용할 수 있습니다. 테스트 결과의 평균값을 구해보죠. 우선은 일반적인 방법으로.</p> <div class="language-ruby extra-class"><pre class="language-ruby"><code>scores <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">56</span><span class="token punctuation">,</span> <span class="token number">87</span><span class="token punctuation">,</span> <span class="token number">49</span><span class="token punctuation">,</span> <span class="token number">75</span><span class="token punctuation">,</span> <span class="token number">90</span><span class="token punctuation">,</span> <span class="token number">63</span><span class="token punctuation">,</span> <span class="token number">65</span><span class="token punctuation">]</span>
scores<span class="token punctuation">.</span>inject<span class="token punctuation">(</span><span class="token operator">:</span><span class="token operator">+</span><span class="token punctuation">)</span> <span class="token operator">/</span> scores<span class="token punctuation">.</span>size <span class="token comment"># =&gt; 69</span>
</code></pre></div><p>짧은 코드인데 scores 변수가 3번이나 나옵니다.</p> <p>instance_eval을 사용하면 score를 사용하지 않을 수 있습니다.</p> <div class="language-ruby extra-class"><pre class="language-ruby"><code><span class="token punctuation">[</span><span class="token number">56</span><span class="token punctuation">,</span> <span class="token number">87</span><span class="token punctuation">,</span> <span class="token number">49</span><span class="token punctuation">,</span> <span class="token number">75</span><span class="token punctuation">,</span> <span class="token number">90</span><span class="token punctuation">,</span> <span class="token number">63</span><span class="token punctuation">,</span> <span class="token number">65</span><span class="token punctuation">]</span><span class="token punctuation">.</span>instance_eval <span class="token punctuation">{</span> inject<span class="token punctuation">(</span><span class="token operator">:</span><span class="token operator">+</span><span class="token punctuation">)</span> <span class="token operator">/</span> size <span class="token punctuation">}</span> <span class="token comment"># =&gt; 69</span>
</code></pre></div><p>다음으로 표준편차 sd를 구해보죠. 우선은 일반적인 방법으로</p> <div class="language-ruby extra-class"><pre class="language-ruby"><code>scores <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">56</span><span class="token punctuation">,</span> <span class="token number">87</span><span class="token punctuation">,</span> <span class="token number">49</span><span class="token punctuation">,</span> <span class="token number">75</span><span class="token punctuation">,</span> <span class="token number">90</span><span class="token punctuation">,</span> <span class="token number">63</span><span class="token punctuation">,</span> <span class="token number">65</span><span class="token punctuation">]</span>
avg <span class="token operator">=</span> scores<span class="token punctuation">.</span>inject<span class="token punctuation">(</span><span class="token operator">:</span><span class="token operator">+</span><span class="token punctuation">)</span> <span class="token operator">/</span> scores<span class="token punctuation">.</span>size
sigmas <span class="token operator">=</span> scores<span class="token punctuation">.</span>map <span class="token punctuation">{</span> <span class="token operator">|</span>n<span class="token operator">|</span> <span class="token punctuation">(</span>avg <span class="token operator">-</span> n<span class="token punctuation">)</span><span class="token operator">**</span><span class="token number">2</span> <span class="token punctuation">}</span>
sd <span class="token operator">=</span> Math<span class="token punctuation">.</span>sqrt<span class="token punctuation">(</span>sigmas<span class="token punctuation">.</span>inject<span class="token punctuation">(</span><span class="token operator">:</span><span class="token operator">+</span><span class="token punctuation">)</span> <span class="token operator">/</span> scores<span class="token punctuation">.</span>size<span class="token punctuation">)</span> <span class="token comment"># =&gt; 14.247806848775006</span>
</code></pre></div><p>instance_eval로.</p> <div class="language-ruby extra-class"><pre class="language-ruby"><code>scores <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">56</span><span class="token punctuation">,</span> <span class="token number">87</span><span class="token punctuation">,</span> <span class="token number">49</span><span class="token punctuation">,</span> <span class="token number">75</span><span class="token punctuation">,</span> <span class="token number">90</span><span class="token punctuation">,</span> <span class="token number">63</span><span class="token punctuation">,</span> <span class="token number">65</span><span class="token punctuation">]</span>
sd <span class="token operator">=</span> scores<span class="token punctuation">.</span>instance_eval <span class="token keyword">do</span>
  avg <span class="token operator">=</span> inject<span class="token punctuation">(</span><span class="token operator">:</span><span class="token operator">+</span><span class="token punctuation">)</span> <span class="token operator">/</span> size
  sigmas <span class="token operator">=</span> map <span class="token punctuation">{</span> <span class="token operator">|</span>n<span class="token operator">|</span> <span class="token punctuation">(</span>avg <span class="token operator">-</span> n<span class="token punctuation">)</span><span class="token operator">**</span><span class="token number">2</span> <span class="token punctuation">}</span>
  Math<span class="token punctuation">.</span>sqrt<span class="token punctuation">(</span>sigmas<span class="token punctuation">.</span>inject<span class="token punctuation">(</span><span class="token operator">:</span><span class="token operator">+</span><span class="token punctuation">)</span> <span class="token operator">/</span> size<span class="token punctuation">)</span>
<span class="token keyword">end</span>
sd <span class="token comment"># =&gt; 14.247806848775006</span>
</code></pre></div><p>비슷한 변수를 블록 안에 집어넣는 것은 물론 블록에서 식이 정리되니 더 보기 좋지 않나요?</p> <h2 id="_39-정규-표현식-이름-있는-참조"><a href="#_39-정규-표현식-이름-있는-참조" class="header-anchor">#</a> 39. 정규 표현식 : 이름 있는 참조</h2> <p>정규 표현식 안에서 <code>()</code>를 부분 매치에 사용할 수 있습니다. 더욱이 이 매치에 이름을 붙이고 싶으면 <code>?\&lt;pattern\&gt;</code>을 사용하면 됩니다.</p> <div class="language-ruby extra-class"><pre class="language-ruby"><code>langs <span class="token operator">=</span> <span class="token string-literal"><span class="token string">&quot;python lisp ruby haskell erlang scala&quot;</span></span>
m <span class="token operator">=</span> langs<span class="token punctuation">.</span>match<span class="token punctuation">(</span><span class="token regex-literal"><span class="token regex">/(?&lt;lang&gt;\w+)/</span></span><span class="token punctuation">)</span> <span class="token comment"># =&gt; #&lt;MatchData &quot;python&quot; lang:&quot;python&quot;&gt;</span>
m<span class="token punctuation">[</span><span class="token string-literal"><span class="token string">'lang'</span></span><span class="token punctuation">]</span> <span class="token comment"># =&gt; &quot;python&quot;</span>
</code></pre></div><p>그리고 정규표현 리터럴을 좌변에 사용하면 이를 지역 변수처럼 사용할 수
있습니다.</p> <div class="language-ruby extra-class"><pre class="language-ruby"><code>langs <span class="token operator">=</span> <span class="token string-literal"><span class="token string">&quot;python lisp ruby haskell erlang scala&quot;</span></span>
<span class="token keyword">if</span> <span class="token operator">/</span><span class="token punctuation">(</span><span class="token operator">?</span><span class="token operator">&lt;</span>most_fun_lang<span class="token operator">&gt;</span>r\w<span class="token operator">+</span><span class="token punctuation">)</span><span class="token operator">/</span> <span class="token operator">=~</span> langs
  printf <span class="token string-literal"><span class="token string">&quot;you should learn %s!&quot;</span></span><span class="token punctuation">,</span> most_fun_lang
<span class="token keyword">end</span>
<span class="token comment"># &gt;&gt; you should learn ruby!</span>
</code></pre></div><h2 id="_40-정규표현-posix-문자-클래스"><a href="#_40-정규표현-posix-문자-클래스" class="header-anchor">#</a> 40. 정규표현:POSIX 문자 클래스</h2> <p>Ruby 1.9에서 <code>\w</code>는 일본어에 매치하지 않습니다.1.9에서 일본어에도 매치시키기 위해서는 POSIX 문자 클래스 <code>word</code>를 사용하는 방법이 있습니다.</p> <div class="language-ruby extra-class"><pre class="language-ruby"><code>need_japanese <span class="token operator">=</span> <span class="token string-literal"><span class="token string">&quot;this-日本語*is*_really_/\\変わってる!&quot;</span></span>
need_japanese<span class="token punctuation">.</span>scan<span class="token punctuation">(</span><span class="token regex-literal"><span class="token regex">/\w+/</span></span><span class="token punctuation">)</span> <span class="token comment"># =&gt; [&quot;this&quot;, &quot;is&quot;, &quot;_really_&quot;]</span>
need_japanese<span class="token punctuation">.</span>scan<span class="token punctuation">(</span><span class="token regex-literal"><span class="token regex">/[[:word:]]+/</span></span><span class="token punctuation">)</span> <span class="token comment"># =&gt; [&quot;this&quot;, &quot;日本語&quot;, &quot;is&quot;, &quot;_really_&quot;, &quot;変わってる&quot;]</span>
</code></pre></div><p>##41. String#match
<code>String#match</code>는 MatchData 객체를 리턴하므로 다음과 같이 사용할 수 있습니다.</p> <div class="language-ruby extra-class"><pre class="language-ruby"><code>date <span class="token operator">=</span> <span class="token string-literal"><span class="token string">&quot;2012february14&quot;</span></span>
m <span class="token operator">=</span> date<span class="token punctuation">.</span>match<span class="token punctuation">(</span><span class="token regex-literal"><span class="token regex">/\D+/</span></span><span class="token punctuation">)</span>
mon<span class="token punctuation">,</span> day<span class="token punctuation">,</span> year <span class="token operator">=</span> m<span class="token punctuation">.</span>to_s<span class="token punctuation">.</span>capitalize<span class="token punctuation">,</span> m<span class="token punctuation">.</span>post_match<span class="token punctuation">,</span> m<span class="token punctuation">.</span>pre_match
<span class="token string-literal"><span class="token string">&quot;</span><span class="token interpolation"><span class="token delimiter punctuation">#{</span><span class="token content">mon</span><span class="token delimiter punctuation">}</span></span><span class="token string"> </span><span class="token interpolation"><span class="token delimiter punctuation">#{</span><span class="token content">day</span><span class="token delimiter punctuation">}</span></span><span class="token string">, </span><span class="token interpolation"><span class="token delimiter punctuation">#{</span><span class="token content">year</span><span class="token delimiter punctuation">}</span></span><span class="token string">&quot;</span></span> <span class="token comment"># =&gt; &quot;February 14, 2012&quot;</span>
</code></pre></div><p>하지만 match는 블록을 받으므로 다음과 같이 사용해도 됩니다.</p> <div class="language-ruby extra-class"><pre class="language-ruby"><code>date <span class="token operator">=</span> <span class="token string-literal"><span class="token string">&quot;2012february14&quot;</span></span>
mon<span class="token punctuation">,</span> day<span class="token punctuation">,</span> year <span class="token operator">=</span> date<span class="token punctuation">.</span>match<span class="token punctuation">(</span><span class="token regex-literal"><span class="token regex">/\D+/</span></span><span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token operator">|</span>m<span class="token operator">|</span> <span class="token punctuation">[</span>m<span class="token punctuation">.</span>to_s<span class="token punctuation">.</span>capitalize<span class="token punctuation">,</span> m<span class="token punctuation">.</span>post_match<span class="token punctuation">,</span> m<span class="token punctuation">.</span>pre_match<span class="token punctuation">]</span> <span class="token punctuation">}</span>
<span class="token string-literal"><span class="token string">&quot;</span><span class="token interpolation"><span class="token delimiter punctuation">#{</span><span class="token content">mon</span><span class="token delimiter punctuation">}</span></span><span class="token string"> </span><span class="token interpolation"><span class="token delimiter punctuation">#{</span><span class="token content">day</span><span class="token delimiter punctuation">}</span></span><span class="token string">, </span><span class="token interpolation"><span class="token delimiter punctuation">#{</span><span class="token content">year</span><span class="token delimiter punctuation">}</span></span><span class="token string">&quot;</span></span> <span class="token comment"># =&gt; &quot;February 14, 2012&quot;</span>
</code></pre></div><h2 id="_42-string-unpack"><a href="#_42-string-unpack" class="header-anchor">#</a> 42. String#unpack</h2> <p>문자열을 정해진 길이를 기준으로 나누고 싶을 땐 어떻게 하는 게
좋을까요? 먼저 정규표현식을 사용해보죠.</p> <div class="language-ruby extra-class"><pre class="language-ruby"><code>a_day <span class="token operator">=</span> <span class="token string-literal"><span class="token string">'20120214'</span></span>
a_day<span class="token punctuation">.</span>match<span class="token punctuation">(</span><span class="token regex-literal"><span class="token regex">/(.{4})(.{2})(.{2})/</span></span><span class="token punctuation">)</span><span class="token punctuation">.</span>captures <span class="token comment"># =&gt; [&quot;2012&quot;, &quot;02&quot;, &quot;14&quot;]</span>
</code></pre></div><p><code>String#unpack</code>를 사용하면 좀 더 간단히 해결할 수 있습니다. (thanks to @no6v 님)</p> <div class="language-ruby extra-class"><pre class="language-ruby"><code>a_day <span class="token operator">=</span> <span class="token string-literal"><span class="token string">'20120214'</span></span>
a_day<span class="token punctuation">.</span>unpack<span class="token punctuation">(</span><span class="token string-literal"><span class="token string">'A4A2A2'</span></span><span class="token punctuation">)</span> <span class="token comment"># =&gt; [&quot;2012&quot;, &quot;02&quot;, &quot;14&quot;]</span>
</code></pre></div><h2 id="_43-enumerable-each-with-object"><a href="#_43-enumerable-each-with-object" class="header-anchor">#</a> 43. Enumerable#each_with_object</h2> <p>Enumerable#map 메소드를 활용하는 방법으로 블록 대신에 <code>&amp;</code>에 심볼을 붙이는 기술이 알려져 있습니다.</p> <div class="language-ruby extra-class"><pre class="language-ruby"><code>langs <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token string-literal"><span class="token string">&quot;ruby&quot;</span></span><span class="token punctuation">,</span> <span class="token string-literal"><span class="token string">&quot;python&quot;</span></span><span class="token punctuation">,</span> <span class="token string-literal"><span class="token string">&quot;lisp&quot;</span></span><span class="token punctuation">,</span> <span class="token string-literal"><span class="token string">&quot;haskell&quot;</span></span><span class="token punctuation">]</span>
langs<span class="token punctuation">.</span>map<span class="token punctuation">(</span><span class="token operator">&amp;</span><span class="token symbol">:capitalize</span><span class="token punctuation">)</span> <span class="token comment"># =&gt; [&quot;Ruby&quot;, &quot;Python&quot;, &quot;Lisp&quot;, &quot;Haskell&quot;]</span>
</code></pre></div><p>하지만 이 기술은 인수를 받는 메소드는 사용할 수 없다는 문제가 있습니다.</p> <div class="language-ruby extra-class"><pre class="language-ruby"><code>langs <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token string-literal"><span class="token string">&quot;ruby&quot;</span></span><span class="token punctuation">,</span> <span class="token string-literal"><span class="token string">&quot;python&quot;</span></span><span class="token punctuation">,</span> <span class="token string-literal"><span class="token string">&quot;lisp&quot;</span></span><span class="token punctuation">,</span> <span class="token string-literal"><span class="token string">&quot;haskell&quot;</span></span><span class="token punctuation">]</span>
langs<span class="token punctuation">.</span>map<span class="token punctuation">(</span><span class="token operator">:</span><span class="token operator">+</span><span class="token punctuation">,</span> <span class="token string-literal"><span class="token string">'ist'</span></span><span class="token punctuation">)</span> <span class="token comment"># =&gt;</span>
<span class="token comment"># ~&gt; -:2:in `map': wrong number of arguments (2 for 0) (ArgumentError)</span>
<span class="token comment"># ~&gt; 	from -:2:in `&lt;main&gt;'</span>
</code></pre></div><p>이럴 땐 <code>each_with_object</code> 메소드를 사용할 수 있습니다.</p> <div class="language-ruby extra-class"><pre class="language-ruby"><code>langs <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token string-literal"><span class="token string">&quot;ruby&quot;</span></span><span class="token punctuation">,</span> <span class="token string-literal"><span class="token string">&quot;python&quot;</span></span><span class="token punctuation">,</span> <span class="token string-literal"><span class="token string">&quot;lisp&quot;</span></span><span class="token punctuation">,</span> <span class="token string-literal"><span class="token string">&quot;haskell&quot;</span></span><span class="token punctuation">]</span>

langs<span class="token punctuation">.</span>each_with_object<span class="token punctuation">(</span><span class="token string-literal"><span class="token string">'ist'</span></span><span class="token punctuation">)</span><span class="token punctuation">.</span>map<span class="token punctuation">(</span><span class="token operator">&amp;</span><span class="token operator">:</span><span class="token operator">+</span><span class="token punctuation">)</span> <span class="token comment"># =&gt; [&quot;rubyist&quot;, &quot;pythonist&quot;, &quot;lispist&quot;, &quot;haskellist&quot;]</span>

<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">]</span><span class="token punctuation">.</span>each_with_object<span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">)</span><span class="token punctuation">.</span>map<span class="token punctuation">(</span><span class="token operator">&amp;</span><span class="token operator">:</span><span class="token operator">+</span><span class="token punctuation">)</span> <span class="token comment"># =&gt; [11, 12, 13]</span>
<span class="token punctuation">(</span><span class="token number">1.</span><span class="token number">.5</span><span class="token punctuation">)</span><span class="token punctuation">.</span>each_with_object<span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">.</span>map<span class="token punctuation">(</span><span class="token operator">&amp;</span><span class="token operator">:</span><span class="token operator">**</span><span class="token punctuation">)</span> <span class="token comment"># =&gt; [1, 4, 9, 16, 25]</span>
</code></pre></div><p>이름이 조금 길죠. 그것보다 네. 그냥 map에 블록을 넘기세요.</p> <p>그리고 이런 방법도 있습니다. (thanks to @tmaeda 님)</p> <div class="language-ruby extra-class"><pre class="language-ruby"><code><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">]</span><span class="token punctuation">.</span>map<span class="token punctuation">(</span><span class="token operator">&amp;</span><span class="token number">10.</span>method<span class="token punctuation">(</span><span class="token operator">:</span><span class="token operator">+</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token comment"># =&gt; [11, 12, 13]</span>
</code></pre></div><p>리시버와 인수가 역전되므로 용도는 한정적입니다만.</p> <h2 id="_44-float-infinity"><a href="#_44-float-infinity" class="header-anchor">#</a> 44. Float::INFINITY</h2> <p>임의의 수열을 만들고자 할 때 하지만 크기가 미리 정해지지 않는 경우가
있습니다. 일단은 <code>Enumerator</code>로 시도해보죠.</p> <div class="language-ruby extra-class"><pre class="language-ruby"><code>sequence <span class="token operator">=</span> <span class="token class-name">Enumerator</span><span class="token punctuation">.</span><span class="token keyword">new</span> <span class="token punctuation">{</span> <span class="token operator">|</span>y<span class="token operator">|</span> i<span class="token operator">=</span><span class="token number">1</span><span class="token punctuation">;</span> loop <span class="token punctuation">{</span> y <span class="token operator">&lt;&lt;</span> i<span class="token punctuation">;</span> i<span class="token operator">+=</span><span class="token number">1</span> <span class="token punctuation">}</span> <span class="token punctuation">}</span>

sequence<span class="token punctuation">.</span>take<span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">)</span> <span class="token comment"># =&gt; [1, 2, 3, 4, 5, 6, 7, 8, 9, 10]</span>
<span class="token number">100.</span>times<span class="token punctuation">.</span>map <span class="token punctuation">{</span> sequence<span class="token punctuation">.</span><span class="token keyword">next</span> <span class="token punctuation">}</span> <span class="token comment"># =&gt; [1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 16, 17, 18, 19, 20, 21, 22, 23, 24, 25, 26, 27, 28, 29, 30, 31, 32, 33, 34, 35, 36, 37, 38, 39, 40, 41, 42, 43, 44, 45, 46, 47, 48, 49, 50, 51, 52, 53, 54, 55, 56, 57, 58, 59, 60, 61, 62, 63, 64, 65, 66, 67, 68, 69, 70, 71, 72, 73, 74, 75, 76, 77, 78, 79, 80, 81, 82, 83, 84, 85, 86, 87, 88, 89, 90, 91, 92, 93, 94, 95, 96, 97, 98, 99, 100]</span>
</code></pre></div><p>단 <code>Enumerator</code>를 사용하지 않아도 비슷한 작업을 할 수 있는데, 이 때 무한을 의미하는 상수 <code>Float::INFINITY</code>를 사용합니다.</p> <div class="language-ruby extra-class"><pre class="language-ruby"><code>sequence <span class="token operator">=</span> <span class="token number">1.</span><span class="token punctuation">.</span><span class="token builtin">Float</span><span class="token double-colon punctuation">::</span><span class="token constant">INFINITY</span>
sequence<span class="token punctuation">.</span>take<span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">)</span> <span class="token comment"># =&gt; [1, 2, 3, 4, 5, 6, 7, 8, 9, 10]</span>

seq <span class="token operator">=</span> sequence<span class="token punctuation">.</span>to_enum
<span class="token number">100.</span>times<span class="token punctuation">.</span>map <span class="token punctuation">{</span> seq<span class="token punctuation">.</span><span class="token keyword">next</span> <span class="token punctuation">}</span> <span class="token comment"># =&gt; [1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 16, 17, 18, 19, 20, 21, 22, 23, 24, 25, 26, 27, 28, 29, 30, 31, 32, 33, 34, 35, 36, 37, 38, 39, 40, 41, 42, 43, 44, 45, 46, 47, 48, 49, 50, 51, 52, 53, 54, 55, 56, 57, 58, 59, 60, 61, 62, 63, 64, 65, 66, 67, 68, 69, 70, 71, 72, 73, 74, 75, 76, 77, 78, 79, 80, 81, 82, 83, 84, 85, 86, 87, 88, 89, 90, 91, 92, 93, 94, 95, 96, 97, 98, 99, 100]</span>
</code></pre></div><p>Infinity는 0으로 나눠서 얻을 수 있으니 아래와 같이 작성할 수도 있습니다.</p> <div class="language-ruby extra-class"><pre class="language-ruby"><code><span class="token punctuation">(</span><span class="token number">1.</span><span class="token number">.1</span><span class="token number">.0</span><span class="token operator">/</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">.</span>take<span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">)</span> <span class="token comment"># =&gt; [1, 2, 3, 4, 5, 6, 7, 8, 9, 10]</span>

<span class="token number">1.</span>step<span class="token punctuation">(</span><span class="token number">1.0</span><span class="token operator">/</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">1.5</span><span class="token punctuation">)</span><span class="token punctuation">.</span>take<span class="token punctuation">(</span><span class="token number">20</span><span class="token punctuation">)</span> <span class="token comment"># =&gt; [1.0, 2.5, 4.0, 5.5, 7.0, 8.5, 10.0, 11.5, 13.0, 14.5, 16.0, 17.5, 19.0, 20.5, 22.0, 23.5, 25.0, 26.5, 28.0, 29.5]</span>
</code></pre></div><h2 id="_45-enumerable-grep"><a href="#_45-enumerable-grep" class="header-anchor">#</a> 45. Enumerable#grep</h2> <p>case의 동일성 판단은 <code>===</code> 메소드를 사용합니다.</p> <div class="language-ruby extra-class"><pre class="language-ruby"><code>temp <span class="token operator">=</span> <span class="token number">85</span>
status <span class="token operator">=</span>
  <span class="token keyword">case</span> temp
  <span class="token keyword">when</span> <span class="token number">1.</span><span class="token number">.40</span><span class="token punctuation">;</span>   <span class="token symbol">:low</span>
  <span class="token keyword">when</span> <span class="token number">80.</span><span class="token number">.100</span><span class="token punctuation">;</span> <span class="token symbol">:Danger</span>
  <span class="token keyword">else</span> <span class="token symbol">:ok</span>
  <span class="token keyword">end</span>
status <span class="token comment"># =&gt; :Danger</span>

<span class="token keyword">class</span> <span class="token class-name">Trivia</span>
<span class="token keyword">end</span>
t <span class="token operator">=</span> <span class="token class-name">Trivia</span><span class="token punctuation">.</span><span class="token keyword">new</span>

klass <span class="token operator">=</span>
  <span class="token keyword">case</span> t
  <span class="token keyword">when</span> <span class="token builtin">String</span><span class="token punctuation">;</span> <span class="token string-literal"><span class="token string">'no good'</span></span>
  <span class="token keyword">when</span> <span class="token builtin">Array</span><span class="token punctuation">;</span>  <span class="token string-literal"><span class="token string">'no no'</span></span>
  <span class="token keyword">when</span> Trivia<span class="token punctuation">;</span> <span class="token string-literal"><span class="token string">'Yes!Trivia!'</span></span>
  <span class="token keyword">end</span>
klass <span class="token comment"># =&gt; &quot;Yes!Trivia!&quot;</span>
</code></pre></div><p>예는 <code>Range#===</code>와 <code>Module#===</code>를 사용한 동일성 판정입니다.</p> <p>사실 <code>Enumerable#grep</code>에 의한 패턴 매치도 ===로 동일 여부를 판단합니다.</p> <div class="language-ruby extra-class"><pre class="language-ruby"><code>numbers <span class="token operator">=</span> <span class="token number">5.</span>step<span class="token punctuation">(</span><span class="token number">80</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">)</span><span class="token punctuation">.</span>to_a <span class="token comment"># =&gt; [5, 10, 15, 20, 25, 30, 35, 40, 45, 50, 55, 60, 65, 70, 75, 80]</span>
numbers<span class="token punctuation">.</span>grep<span class="token punctuation">(</span><span class="token number">20.</span><span class="token number">.50</span><span class="token punctuation">)</span> <span class="token comment"># =&gt; [20, 25, 30, 35, 40, 45, 50]</span>

t1<span class="token punctuation">,</span> t2<span class="token punctuation">,</span> t3<span class="token punctuation">,</span> t4<span class="token punctuation">,</span> t5 <span class="token operator">=</span> <span class="token string-literal"><span class="token string">'trivia'</span></span><span class="token punctuation">,</span> <span class="token class-name">Trivia</span><span class="token punctuation">.</span><span class="token keyword">new</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token symbol">:trivia</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token punctuation">{</span><span class="token symbol">trivia</span><span class="token operator">:</span><span class="token number">1</span><span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token class-name">Trivia</span><span class="token punctuation">.</span><span class="token keyword">new</span>

<span class="token punctuation">[</span>t1<span class="token punctuation">,</span> t2<span class="token punctuation">,</span> t3<span class="token punctuation">,</span> t4<span class="token punctuation">,</span> t5<span class="token punctuation">]</span><span class="token punctuation">.</span>grep<span class="token punctuation">(</span>Trivia<span class="token punctuation">)</span> <span class="token comment"># =&gt; [#&lt;Trivia:0x000001008613b0&gt;, #&lt;Trivia:0x000001008610e0&gt;]</span>
</code></pre></div><h2 id="_46-string-gsub"><a href="#_46-string-gsub" class="header-anchor">#</a> 46. String#gsub</h2> <p>문자열에서 나타나는 부분 문자열이 나타나는 회수가 필요한 경우가
있습니다. 보통은 <code>String#scan</code>을 사용하면 됩니다.</p> <div class="language-ruby extra-class"><pre class="language-ruby"><code><span class="token constant">DATA</span><span class="token punctuation">.</span>read<span class="token punctuation">.</span>scan<span class="token punctuation">(</span><span class="token regex-literal"><span class="token regex">/hello/i</span></span><span class="token punctuation">)</span><span class="token punctuation">.</span>count <span class="token comment"># =&gt; 48</span>

__END__
You say <span class="token string-literal"><span class="token string">&quot;Yes&quot;</span></span><span class="token punctuation">,</span> <span class="token constant">I</span> say <span class="token string-literal"><span class="token string">&quot;No&quot;</span></span><span class="token punctuation">.</span>
You say <span class="token string-literal"><span class="token string">&quot;Stop&quot;</span></span> <span class="token keyword">and</span> <span class="token constant">I</span> say <span class="token string-literal"><span class="token string">&quot;Go, go, go&quot;</span></span><span class="token punctuation">.</span>
Oh no<span class="token punctuation">.</span>
You say <span class="token string-literal"><span class="token string">&quot;Goodbye&quot;</span></span> <span class="token keyword">and</span> <span class="token constant">I</span> say <span class="token string-literal"><span class="token string">&quot;Hello, hello, hello&quot;</span></span><span class="token punctuation">.</span>
<span class="token constant">I</span> don't know why you say <span class="token string-literal"><span class="token string">&quot;Goodbye&quot;</span></span><span class="token punctuation">,</span> <span class="token constant">I</span> say <span class="token string-literal"><span class="token string">&quot;Hello, hello, hello&quot;</span></span><span class="token punctuation">.</span>
<span class="token constant">I</span> don't know why you say goodbye<span class="token punctuation">,</span> <span class="token constant">I</span> say hello<span class="token punctuation">.</span>
<span class="token constant">I</span> say <span class="token string-literal"><span class="token string">&quot;High&quot;</span></span><span class="token punctuation">,</span> you say <span class="token string-literal"><span class="token string">&quot;Low&quot;</span></span><span class="token punctuation">.</span>
You say <span class="token string-literal"><span class="token string">&quot;Why?&quot;</span></span> And <span class="token constant">I</span> say <span class="token string-literal"><span class="token string">&quot;I don't know&quot;</span></span><span class="token punctuation">.</span>
Oh no<span class="token punctuation">.</span>
You say <span class="token string-literal"><span class="token string">&quot;Goodbye&quot;</span></span> <span class="token keyword">and</span> <span class="token constant">I</span> say <span class="token string-literal"><span class="token string">&quot;Hello, hello, hello&quot;</span></span><span class="token punctuation">.</span>
<span class="token constant">I</span> don't know why you say <span class="token string-literal"><span class="token string">&quot;Goodbye&quot;</span></span><span class="token punctuation">,</span> <span class="token constant">I</span> say <span class="token string-literal"><span class="token string">&quot;Hello, hello, hello&quot;</span></span><span class="token punctuation">.</span>
<span class="token punctuation">(</span>Hello<span class="token punctuation">,</span> goodbye<span class="token punctuation">,</span> hello<span class="token punctuation">,</span> goodbye<span class="token punctuation">.</span> Hello<span class="token punctuation">,</span> goodbye<span class="token punctuation">.</span><span class="token punctuation">)</span>
<span class="token constant">I</span> don't know why you say <span class="token string-literal"><span class="token string">&quot;Goodbye&quot;</span></span><span class="token punctuation">,</span> <span class="token constant">I</span> say <span class="token string-literal"><span class="token string">&quot;Hello&quot;</span></span><span class="token punctuation">.</span>
<span class="token punctuation">(</span>Hello<span class="token punctuation">,</span> goodbye<span class="token punctuation">,</span> hello<span class="token punctuation">,</span> goodbye<span class="token punctuation">.</span> Hello<span class="token punctuation">,</span> goodbye<span class="token punctuation">.</span> Hello<span class="token punctuation">,</span> goodbye<span class="token punctuation">.</span><span class="token punctuation">)</span>
Why<span class="token punctuation">,</span> why<span class="token punctuation">,</span> why<span class="token punctuation">,</span> why<span class="token punctuation">,</span> why<span class="token punctuation">,</span> why<span class="token punctuation">,</span> <span class="token keyword">do</span> you
Say <span class="token string-literal"><span class="token string">&quot;Goodbye, goodbye, bye, bye&quot;</span></span><span class="token punctuation">.</span>
Oh no<span class="token punctuation">.</span>
You say <span class="token string-literal"><span class="token string">&quot;Goodbye&quot;</span></span> <span class="token keyword">and</span> <span class="token constant">I</span> say <span class="token string-literal"><span class="token string">&quot;Hello, hello, hello&quot;</span></span><span class="token punctuation">.</span>
<span class="token constant">I</span> don't know why you say <span class="token string-literal"><span class="token string">&quot;Goodbye&quot;</span></span><span class="token punctuation">,</span> <span class="token constant">I</span> say <span class="token string-literal"><span class="token string">&quot;Hello, hello, hello&quot;</span></span><span class="token punctuation">.</span>
<span class="token constant">I</span> don't know why you say <span class="token string-literal"><span class="token string">&quot;Goodbye&quot;</span></span><span class="token punctuation">,</span> <span class="token constant">I</span> say <span class="token string-literal"><span class="token string">&quot;Hello&quot;</span></span><span class="token punctuation">.</span>
You say <span class="token string-literal"><span class="token string">&quot;Yes&quot;</span></span><span class="token punctuation">,</span> <span class="token constant">I</span> say <span class="token string-literal"><span class="token string">&quot;No&quot;</span></span><span class="token punctuation">.</span>
<span class="token punctuation">(</span><span class="token constant">I</span> say <span class="token string-literal"><span class="token string">&quot;Yes&quot;</span></span><span class="token punctuation">,</span> but <span class="token constant">I</span> may mean <span class="token string-literal"><span class="token string">&quot;No&quot;</span></span><span class="token punctuation">)</span><span class="token punctuation">.</span>
You say <span class="token string-literal"><span class="token string">&quot;Stop&quot;</span></span><span class="token punctuation">,</span> <span class="token constant">I</span> say <span class="token string-literal"><span class="token string">&quot;Go, go, go&quot;</span></span><span class="token punctuation">.</span>
<span class="token punctuation">(</span><span class="token constant">I</span> can stay still it's time to go<span class="token punctuation">)</span><span class="token punctuation">.</span>
Oh<span class="token punctuation">,</span> oh no<span class="token punctuation">.</span>
You say <span class="token string-literal"><span class="token string">&quot;Goodbye&quot;</span></span> <span class="token keyword">and</span> <span class="token constant">I</span> say <span class="token string-literal"><span class="token string">&quot;Hello, hello, hello&quot;</span></span><span class="token punctuation">.</span>
<span class="token constant">I</span> don't know why you say <span class="token string-literal"><span class="token string">&quot;Goodbye&quot;</span></span><span class="token punctuation">,</span> <span class="token constant">I</span> say <span class="token string-literal"><span class="token string">&quot;Hello, hello, hello&quot;</span></span><span class="token punctuation">.</span>
<span class="token constant">I</span> don't know why you say <span class="token string-literal"><span class="token string">&quot;Goodbye&quot;</span></span><span class="token punctuation">,</span> <span class="token constant">I</span> say <span class="token string-literal"><span class="token string">&quot;Hello, hello, hello&quot;</span></span><span class="token punctuation">.</span>
<span class="token constant">I</span> don't know why you say <span class="token string-literal"><span class="token string">&quot;Goodbye&quot;</span></span><span class="token punctuation">,</span> <span class="token constant">I</span> say <span class="token string-literal"><span class="token string">&quot;Hello-wow, oh. Hello&quot;</span></span><span class="token punctuation">.</span>
Hela<span class="token punctuation">,</span> heba<span class="token punctuation">,</span> helloa<span class="token punctuation">.</span> Hela<span class="token punctuation">,</span> heba<span class="token punctuation">,</span> helloa<span class="token punctuation">.</span> Hela<span class="token punctuation">,</span> heba<span class="token punctuation">,</span> helloa<span class="token punctuation">.</span>
Hela<span class="token punctuation">,</span> heba<span class="token punctuation">,</span> helloa<span class="token punctuation">.</span> <span class="token punctuation">(</span>Hela<span class="token punctuation">.</span><span class="token punctuation">)</span> Hela<span class="token punctuation">,</span> heba<span class="token punctuation">,</span> helloa<span class="token punctuation">.</span> Hela<span class="token punctuation">,</span> heba<span class="token punctuation">,</span> helloa<span class="token punctuation">.</span>
Hela<span class="token punctuation">,</span> heba<span class="token punctuation">,</span> helloa<span class="token punctuation">.</span> Hela<span class="token punctuation">,</span> heba<span class="token punctuation">,</span> helloa<span class="token punctuation">.</span> Hela<span class="token punctuation">,</span> heba<span class="token punctuation">,</span> helloa<span class="token punctuation">.</span>
</code></pre></div><p>훌륭한 가사네요.</p> <p>하지만 <code>String#gsub</code>는 블록을 넘기지 않으면 Enumerator 객체를 리턴하니 같은 일을 할 수 있습니다.</p> <div class="language-ruby extra-class"><pre class="language-ruby"><code><span class="token constant">DATA</span><span class="token punctuation">.</span>read<span class="token punctuation">.</span>gsub<span class="token punctuation">(</span><span class="token regex-literal"><span class="token regex">/hello/i</span></span><span class="token punctuation">)</span><span class="token punctuation">.</span>count <span class="token comment"># =&gt; 48</span>

__END__
You say <span class="token string-literal"><span class="token string">&quot;Yes&quot;</span></span><span class="token punctuation">,</span> <span class="token constant">I</span> say <span class="token string-literal"><span class="token string">&quot;No&quot;</span></span><span class="token punctuation">.</span>
You say <span class="token string-literal"><span class="token string">&quot;Stop&quot;</span></span> <span class="token keyword">and</span> <span class="token constant">I</span> say <span class="token string-literal"><span class="token string">&quot;Go, go, go&quot;</span></span><span class="token punctuation">.</span>
Oh no<span class="token punctuation">.</span>
You say <span class="token string-literal"><span class="token string">&quot;Goodbye&quot;</span></span> <span class="token keyword">and</span> <span class="token constant">I</span> say <span class="token string-literal"><span class="token string">&quot;Hello, hello, hello&quot;</span></span><span class="token punctuation">.</span>
<span class="token operator">...</span><span class="token punctuation">.</span>
</code></pre></div><h2 id="_47-클래스-메소드-정의"><a href="#_47-클래스-메소드-정의" class="header-anchor">#</a> 47. 클래스 메소드 정의</h2> <p>클래스나 모듈의 메소드를 정의할 때는 일반적으로 아래와 같이 합니다.</p> <div class="language-ruby extra-class"><pre class="language-ruby"><code><span class="token keyword">class</span> <span class="token class-name">Calc</span>
  <span class="token keyword">class</span> <span class="token operator">&lt;&lt;</span> <span class="token keyword">self</span>
    <span class="token keyword">def</span> <span class="token operator">&gt;&gt;</span><span class="token punctuation">(</span>exp<span class="token punctuation">)</span>
      eval exp
    <span class="token keyword">end</span>
  <span class="token keyword">end</span>
<span class="token keyword">end</span>

Calc <span class="token operator">&gt;&gt;</span> <span class="token string-literal"><span class="token string">'1 + 2'</span></span> <span class="token comment"># =&gt; 3</span>
Calc <span class="token operator">&gt;&gt;</span> <span class="token string-literal"><span class="token string">'10 ** 2'</span></span> <span class="token comment"># =&gt; 100</span>
</code></pre></div><p>바깥 쪽 클래스의 정의를 <code>Class.new</code>나 <code>Module.new</code>을 사용하면 다음과 같이 작성할 수도 있습니다.</p> <div class="language-ruby extra-class"><pre class="language-ruby"><code><span class="token keyword">class</span> <span class="token operator">&lt;&lt;</span> Calc <span class="token operator">=</span> <span class="token class-name">Class</span><span class="token punctuation">.</span><span class="token keyword">new</span>
  <span class="token keyword">def</span> <span class="token operator">&gt;&gt;</span><span class="token punctuation">(</span>exp<span class="token punctuation">)</span>
    eval exp
  <span class="token keyword">end</span>
<span class="token keyword">end</span>

Calc <span class="token operator">&gt;&gt;</span> <span class="token string-literal"><span class="token string">'123 / 4.0'</span></span> <span class="token comment"># =&gt; 30.75</span>
Calc <span class="token operator">&gt;&gt;</span> <span class="token string-literal"><span class="token string">'2 * Math::PI'</span></span> <span class="token comment"># =&gt; 6.283185307179586</span>
</code></pre></div><p>이 자체는 별 게 없습니다반 <code>Calc.&gt;&gt;</code>라는 메소드 이름이 irb 스러워서 좋지 않나요?</p> <h2 id="_48-true-false-nil"><a href="#_48-true-false-nil" class="header-anchor">#</a> 48. true, false, nil</h2> <p>Ruby에서 다루는 모든 데이터는 객체라 숫자도 클래스도
그리고 <code>true</code>, <code>false</code>, <code>nil</code>도 모두 객체라는 건 알고 계시겠죠. 따라서 당연하게도 이러한 객체들은 메소드를 가지고 있고 메소드를 추가할 수도 있습니다.</p> <div class="language-ruby extra-class"><pre class="language-ruby"><code><span class="token keyword">def</span> <span class="token method-definition"><span class="token class-name">true</span><span class="token punctuation">.</span><span class="token function">true</span></span><span class="token operator">?</span>  <span class="token string-literal"><span class="token string">'Beleive me. you are true.'</span></span>
<span class="token keyword">end</span>

<span class="token keyword">def</span> <span class="token method-definition"><span class="token class-name">false</span><span class="token punctuation">.</span><span class="token function">true</span></span><span class="token operator">?</span>  <span class="token string-literal"><span class="token string">'I said, you are false!'</span></span>
<span class="token keyword">end</span>

my_point<span class="token punctuation">,</span> your_point <span class="token operator">=</span> <span class="token number">87</span><span class="token punctuation">,</span> <span class="token number">35</span>
border <span class="token operator">=</span> <span class="token number">60</span>
my_result <span class="token operator">=</span> my_point <span class="token operator">&gt;</span> border
your_result <span class="token operator">=</span> your_point <span class="token operator">&gt;</span> border

my_result <span class="token comment"># =&gt; true</span>
my_result<span class="token punctuation">.</span><span class="token boolean">true</span><span class="token operator">?</span><span class="token comment"># =&gt; &quot;Beleive me. you are true.&quot;</span>
your_result <span class="token comment"># =&gt; false</span>
your_result<span class="token punctuation">.</span><span class="token boolean">true</span><span class="token operator">?</span><span class="token comment"># =&gt; &quot;I said, you are false!&quot;</span>
</code></pre></div><p><code>nil</code>에도 메소드를 정의해보죠.<code>===</code> 메소드를 정의해서 case에서 사용해보죠.</p> <div class="language-ruby extra-class"><pre class="language-ruby"><code><span class="token keyword">def</span> <span class="token method-definition"><span class="token function">nil</span></span><span class="token punctuation">.</span><span class="token operator">===</span><span class="token punctuation">(</span>other<span class="token punctuation">)</span>
  other<span class="token punctuation">.</span><span class="token keyword">nil</span><span class="token operator">?</span><span class="token operator">||</span> other<span class="token punctuation">.</span>empty<span class="token operator">?</span><span class="token keyword">end</span>

<span class="token keyword">def</span> <span class="token method-definition"><span class="token function">proceed</span></span><span class="token punctuation">(</span>obj<span class="token punctuation">)</span>
  <span class="token builtin">Array</span><span class="token punctuation">(</span>obj<span class="token punctuation">)</span><span class="token punctuation">.</span>join<span class="token punctuation">.</span>split<span class="token punctuation">(</span><span class="token operator">/</span><span class="token operator">/</span><span class="token punctuation">)</span><span class="token punctuation">.</span>join<span class="token punctuation">(</span><span class="token string-literal"><span class="token string">'*'</span></span><span class="token punctuation">)</span>
<span class="token keyword">end</span>

full <span class="token operator">=</span> <span class="token string-literal"><span class="token string">&quot;I'm full.&quot;</span></span>
empty <span class="token operator">=</span> <span class="token string-literal"><span class="token string">&quot;&quot;</span></span>
_nil_ <span class="token operator">=</span> <span class="token keyword">nil</span>

objects <span class="token operator">=</span> <span class="token punctuation">[</span>full<span class="token punctuation">,</span> empty<span class="token punctuation">,</span> _nil_<span class="token punctuation">,</span> <span class="token string-literal"><span class="token string">%w(I am full)</span></span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token punctuation">{</span><span class="token symbol">:hello</span> <span class="token operator">=&gt;</span> <span class="token string-literal"><span class="token string">'world'</span></span><span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">]</span>

<span class="token keyword">for</span> obj <span class="token keyword">in</span> objects
  <span class="token keyword">case</span> obj
  <span class="token keyword">when</span> <span class="token keyword">nil</span>
    puts <span class="token string-literal"><span class="token string">&quot;Stop it!`</span><span class="token interpolation"><span class="token delimiter punctuation">#{</span><span class="token content">obj<span class="token punctuation">.</span>inspect</span><span class="token delimiter punctuation">}</span></span><span class="token string">` is empty or nil.&quot;</span></span>
  <span class="token keyword">else</span>
    puts proceed obj
  <span class="token keyword">end</span>
<span class="token keyword">end</span>
<span class="token comment"># &gt;&gt; I*'*m* *f*u*l*l*.</span>
<span class="token comment"># &gt;&gt; Stop it!`&quot;&quot;` is empty or nil.</span>
<span class="token comment"># &gt;&gt; Stop it!`nil` is empty or nil.</span>
<span class="token comment"># &gt;&gt; I*a*m*f*u*l*l</span>
<span class="token comment"># &gt;&gt; Stop it!`[]` is empty or nil.</span>
<span class="token comment"># &gt;&gt; h*e*l*l*o*w*o*r*l*d</span>
<span class="token comment"># &gt;&gt; Stop it!`{}` is empty or nil.</span>
</code></pre></div><p>너무 심취했나요.</p> <h2 id="_49-강제-타입-변환-coerce"><a href="#_49-강제-타입-변환-coerce" class="header-anchor">#</a> 49. 강제 타입 변환 coerce</h2> <p>숫자 리스트에 n배를 곱하면 각각의 요소가 n배가 되는 객체가 필요하다고
해보죠. Array를 상속한 NumList로 이를 구현해보겠습니다.</p> <div class="language-ruby extra-class"><pre class="language-ruby"><code><span class="token keyword">class</span> <span class="token class-name">NumList</span> <span class="token operator">&lt;</span> <span class="token builtin">Array</span>
  <span class="token keyword">def</span> <span class="token operator">*</span><span class="token punctuation">(</span>n<span class="token punctuation">)</span>
    map <span class="token punctuation">{</span> <span class="token operator">|</span>e<span class="token operator">|</span> e <span class="token operator">*</span> n <span class="token punctuation">}</span>
  <span class="token keyword">end</span>
<span class="token keyword">end</span>

numlist <span class="token operator">=</span> NumList<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">]</span>

numlist <span class="token operator">*</span> <span class="token number">3</span> <span class="token comment"># =&gt; [3, 6, 9]</span>
</code></pre></div><p>욕심을 내서 곱하는 수를 앞에 놓아도 작동하도록 만들어보겠습니다.</p> <div class="language-ruby extra-class"><pre class="language-ruby"><code><span class="token number">3</span> <span class="token operator">*</span> numlist <span class="token comment"># =&gt;</span>
<span class="token comment"># ~&gt; -:15:in `*': NumList can't be coerced into Fixnum (TypeError)</span>
<span class="token comment"># ~&gt; 	from -:15:in `&lt;main&gt;'</span>
</code></pre></div><p>당연히 <code>Fixnum#*</code> 메소드는 인수로 NumList 객체를 받을 수 없으므로
에러가 납니다. 설마 Fixnum#* 수정하시진 않겠죠. 어떻게 해야할까요.</p> <p>이를 때는 <code>coerce</code>(강제 타입 변환)을 사용할 수 있습니다.</p> <div class="language-ruby extra-class"><pre class="language-ruby"><code><span class="token keyword">class</span> <span class="token class-name">NumList</span> <span class="token operator">&lt;</span> <span class="token builtin">Array</span>
  <span class="token keyword">def</span> <span class="token operator">*</span><span class="token punctuation">(</span>n<span class="token punctuation">)</span>
    map <span class="token punctuation">{</span> <span class="token operator">|</span>e<span class="token operator">|</span> e <span class="token operator">*</span> n <span class="token punctuation">}</span>
  <span class="token keyword">end</span>

  <span class="token keyword">def</span> <span class="token method-definition"><span class="token function">coerce</span></span><span class="token punctuation">(</span>n<span class="token punctuation">)</span>
    <span class="token punctuation">[</span><span class="token keyword">self</span><span class="token punctuation">,</span> n<span class="token punctuation">]</span>
  <span class="token keyword">end</span>
<span class="token keyword">end</span>

numlist <span class="token operator">=</span> NumList<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">]</span>

numlist <span class="token operator">*</span> <span class="token number">3</span> <span class="token comment"># =&gt; [3, 6, 9]</span>
<span class="token number">3</span> <span class="token operator">*</span> numlist <span class="token comment"># =&gt; [3, 6, 9]</span>
</code></pre></div><p>Fixnum#* 메소드는 인수가 형변환이 불가능할 경우 객체의 coerce 메소드를 호출하는데 이를 이용하는 방법입니다.</p> <h2 id="_50-data-rewind"><a href="#_50-data-rewind" class="header-anchor">#</a> 50. DATA.rewind</h2> <p>DATA는 __END__ 이후의 부분을 File 객체로 불러들인 객체입니다.
따라서 rewind 메소드를 사용할 수 있는다. 이는 __END__ 이후의 첫
행으로 돌아가는 게 아니라 전체 파일의 첫 행으로 돌아갑니다. 따라서 이를 사용하면, 아차차.. Quine를 만들 수 있습니다.</p> <div class="language-ruby extra-class"><pre class="language-ruby"><code><span class="token comment">#!/usr/bin/env ruby</span>
<span class="token keyword">require</span> <span class="token string-literal"><span class="token string">&quot;g&quot;</span></span>
<span class="token keyword">def</span> <span class="token method-definition"><span class="token function">evaluate</span></span><span class="token punctuation">(</span>str<span class="token punctuation">)</span>
  op <span class="token operator">=</span> <span class="token string-literal"><span class="token string">%w(\+ \* \/)</span></span>
  digit <span class="token operator">=</span> <span class="token regex-literal"><span class="token regex">/-*\d+/</span></span>
  <span class="token keyword">if</span> m <span class="token operator">=</span> str<span class="token punctuation">.</span>match<span class="token punctuation">(</span><span class="token regex-literal"><span class="token regex">/(</span><span class="token interpolation"><span class="token delimiter punctuation">#{</span><span class="token content">op</span><span class="token delimiter punctuation">}</span></span><span class="token regex">)\s+(</span><span class="token interpolation"><span class="token delimiter punctuation">#{</span><span class="token content">digit</span><span class="token delimiter punctuation">}</span></span><span class="token regex">)\s+(</span><span class="token interpolation"><span class="token delimiter punctuation">#{</span><span class="token content">digit</span><span class="token delimiter punctuation">}</span></span><span class="token regex">)/</span></span><span class="token punctuation">)</span>
    op<span class="token punctuation">,</span> a<span class="token punctuation">,</span> b <span class="token operator">=</span> m<span class="token punctuation">.</span>captures
    inner <span class="token operator">=</span> a<span class="token punctuation">.</span>to_i<span class="token punctuation">.</span>send<span class="token punctuation">(</span>op<span class="token punctuation">,</span> b<span class="token punctuation">.</span>to_i<span class="token punctuation">)</span>
    str <span class="token operator">=</span> m<span class="token punctuation">.</span>pre_match <span class="token operator">+</span> inner<span class="token punctuation">.</span>to_s <span class="token operator">+</span> m<span class="token punctuation">.</span>post_match
    evaluate<span class="token punctuation">(</span>str<span class="token punctuation">)</span>
  <span class="token keyword">else</span>
    str
  <span class="token keyword">end</span>
<span class="token keyword">end</span>
g evaluate<span class="token punctuation">(</span><span class="token string-literal"><span class="token string">&quot;+ * 3 4 5&quot;</span></span><span class="token punctuation">)</span>
<span class="token constant">DATA</span><span class="token punctuation">.</span>rewind
puts <span class="token constant">DATA</span><span class="token punctuation">.</span>to_a
__END__
</code></pre></div><p>이 코드를 실행하면 evaluate의 결과가 출력되는 것과 함께 코드 자체가 표준 출력으로 출력됩니다.</p> <h2 id="_51-ruby-키워드"><a href="#_51-ruby-키워드" class="header-anchor">#</a> 51. Ruby 키워드</h2> <p>Ruby 키워드는 언어의 예약어가 아니므로 명시적인 문맥에서 사용하기만 한다면
메소드 이름으로 사용하는 것도 가능합니다. 여기에서는 <code>case</code>, <code>if</code>, <code>for</code>을 Trivia 클래스에서 정의해보겠습니다.</p> <div class="language-ruby extra-class"><pre class="language-ruby"><code><span class="token keyword">class</span> <span class="token class-name">Trivia</span>
  <span class="token keyword">def</span> <span class="token method-definition"><span class="token function">case</span></span><span class="token punctuation">(</span>klass<span class="token punctuation">)</span>
    <span class="token keyword">case</span> <span class="token keyword">self</span>
    <span class="token keyword">when</span> klass<span class="token punctuation">;</span> <span class="token string-literal"><span class="token string">'You are my sunshine.'</span></span>
    <span class="token keyword">else</span> <span class="token string-literal"><span class="token string">'No, you are Alien for me'</span></span>
    <span class="token keyword">end</span>
  <span class="token keyword">end</span>

  <span class="token keyword">def</span> <span class="token method-definition"><span class="token function">if</span></span><span class="token punctuation">(</span>bool<span class="token punctuation">,</span> arg<span class="token punctuation">)</span>
    <span class="token keyword">if</span> bool
      <span class="token keyword">yield</span> arg
    <span class="token keyword">else</span>
      arg<span class="token punctuation">.</span>reverse
    <span class="token keyword">end</span>
  <span class="token keyword">end</span>

  <span class="token keyword">def</span> <span class="token method-definition"><span class="token function">for</span></span><span class="token punctuation">(</span>list<span class="token punctuation">)</span>
    list<span class="token punctuation">.</span>map <span class="token punctuation">{</span> <span class="token operator">|</span>e<span class="token operator">|</span> <span class="token keyword">yield</span> e <span class="token punctuation">}</span>
  <span class="token keyword">end</span>
<span class="token keyword">end</span>

t <span class="token operator">=</span> <span class="token class-name">Trivia</span><span class="token punctuation">.</span><span class="token keyword">new</span>

t<span class="token punctuation">.</span><span class="token keyword">case</span><span class="token punctuation">(</span>Trivia<span class="token punctuation">)</span> <span class="token comment"># =&gt; &quot;You are my sunshine.&quot;</span>
t<span class="token punctuation">.</span><span class="token keyword">case</span><span class="token punctuation">(</span><span class="token builtin">Array</span><span class="token punctuation">)</span> <span class="token comment"># =&gt; &quot;No, you are Alien for me&quot;</span>

t<span class="token punctuation">.</span><span class="token keyword">if</span><span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">,</span> <span class="token string-literal"><span class="token string">'my name is charlie'</span></span><span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token operator">|</span>str<span class="token operator">|</span> str<span class="token punctuation">.</span>upcase <span class="token punctuation">}</span> <span class="token comment"># =&gt; &quot;MY NAME IS CHARLIE&quot;</span>
t<span class="token punctuation">.</span><span class="token keyword">if</span><span class="token punctuation">(</span><span class="token boolean">false</span><span class="token punctuation">,</span> <span class="token string-literal"><span class="token string">'my name is charlie'</span></span><span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token operator">|</span>str<span class="token operator">|</span> str<span class="token punctuation">.</span>upcase <span class="token punctuation">}</span> <span class="token comment"># =&gt; &quot;eilrahc si eman ym&quot;</span>

t<span class="token punctuation">.</span><span class="token keyword">for</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token operator">*</span><span class="token number">1.</span><span class="token number">.10</span><span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token operator">|</span>i<span class="token operator">|</span> i<span class="token operator">**</span><span class="token number">2</span> <span class="token punctuation">}</span> <span class="token comment"># =&gt; [1, 4, 9, 16, 25, 36, 49, 64, 81, 100]</span>
</code></pre></div><h2 id="_52-yaml-태그-지정"><a href="#_52-yaml-태그-지정" class="header-anchor">#</a> 52. YAML 태그 지정</h2> <p>사용자 데이터를 다루는 프로그램을 만들 때 프로그램과 데이터를 분리하기 위해 <code>yaml 라이브러리</code>를 사용하면 편리합니다.</p> <div class="language-ruby extra-class"><pre class="language-ruby"><code><span class="token keyword">require</span> <span class="token string-literal"><span class="token string">&quot;yaml&quot;</span></span>

langs_array <span class="token operator">=</span> <span class="token constant">YAML</span><span class="token punctuation">.</span>load<span class="token punctuation">(</span><span class="token constant">DATA</span><span class="token punctuation">)</span>
puts langs_array<span class="token punctuation">.</span>map <span class="token punctuation">{</span> <span class="token operator">|</span>lang<span class="token operator">|</span> <span class="token string-literal"><span class="token string">&quot;My favorite language is &quot;</span></span> <span class="token operator">+</span> lang <span class="token punctuation">}</span>

<span class="token comment"># &gt;&gt; My favorite language is Ruby</span>
<span class="token comment"># &gt;&gt; My favorite language is Lisp</span>
<span class="token comment"># &gt;&gt; My favorite language is C++</span>

__END__
<span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span>
<span class="token operator">-</span> Ruby
<span class="token operator">-</span> Lisp
<span class="token operator">-</span> <span class="token constant">C</span><span class="token operator">+</span><span class="token operator">+</span>
</code></pre></div><p>여기서 <code>!ruby/</code>으로 시작하는 태그를 사용하면 문자열에 해당하는
클래스를 지정할 수 있는데 <code>!ruby/object:&lt;클래스 이름&gt;</code> 태그를 사용하면
임의의 클래스를 지정할 수도 있습니다. Language 클래스 객체로 YAML 데이터를 읽어와보겠습니다.</p> <div class="language-ruby extra-class"><pre class="language-ruby"><code> <span class="token keyword">require</span> <span class="token string-literal"><span class="token string">&quot;yaml&quot;</span></span>
 <span class="token keyword">class</span> <span class="token class-name">Language</span>
   attr_accessor <span class="token symbol">:name</span><span class="token punctuation">,</span> <span class="token symbol">:born</span><span class="token punctuation">,</span> <span class="token symbol">:designer</span>
   <span class="token keyword">def</span> <span class="token method-definition"><span class="token function">profile</span></span>
     <span class="token punctuation">[</span>name<span class="token punctuation">,</span> born<span class="token punctuation">,</span> designer<span class="token punctuation">]</span> <span class="token operator">*</span> <span class="token string-literal"><span class="token string">'-'</span></span>
   <span class="token keyword">end</span>
 <span class="token keyword">end</span>

 members <span class="token operator">=</span> <span class="token constant">YAML</span><span class="token punctuation">.</span>load<span class="token punctuation">(</span><span class="token constant">DATA</span><span class="token punctuation">)</span>

 puts members<span class="token punctuation">.</span>map <span class="token punctuation">{</span> <span class="token operator">|</span>member<span class="token operator">|</span> member<span class="token punctuation">.</span>profile <span class="token punctuation">}</span>

 <span class="token comment"># &gt;&gt; Ruby-1993-Yukihiro Matsumoto</span>
 <span class="token comment"># &gt;&gt; Lisp-1958-Joh McCarthy</span>
 <span class="token comment"># &gt;&gt; C++-1983-Bjarne Stroustrup</span>

 __END__
 <span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span>
 <span class="token operator">-</span> <span class="token operator">!</span>ruby<span class="token operator">/</span>object<span class="token symbol">:Language</span>
   <span class="token symbol">name</span><span class="token operator">:</span> Ruby
   <span class="token symbol">born</span><span class="token operator">:</span> <span class="token number">1993</span>
   <span class="token symbol">designer</span><span class="token operator">:</span> Yukihiro Matsumoto
 <span class="token operator">-</span> <span class="token operator">!</span>ruby<span class="token operator">/</span>object<span class="token symbol">:Language</span>
   <span class="token symbol">name</span><span class="token operator">:</span> Lisp
   <span class="token symbol">born</span><span class="token operator">:</span> <span class="token number">1958</span>
   <span class="token symbol">designer</span><span class="token operator">:</span> Joh McCarthy
 <span class="token operator">-</span> <span class="token operator">!</span>ruby<span class="token operator">/</span>object<span class="token symbol">:Language</span>
   <span class="token symbol">name</span><span class="token operator">:</span> <span class="token constant">C</span><span class="token operator">+</span><span class="token operator">+</span>
   <span class="token symbol">born</span><span class="token operator">:</span> <span class="token number">1983</span>
   <span class="token symbol">designer</span><span class="token operator">:</span> Bjarne Stroustrup
</code></pre></div><h2 id="_53-단항연산자-tilde"><a href="#_53-단항연산자-tilde" class="header-anchor">#</a> 53. 단항연산자 ~ (tilde)</h2> <p>단항연산자 <code>~</code>는 사실 메소드인데 이 메소드가 어디서 정의되어있는 지
아시나요? 맞습니다. <code>Fixnum</code>과 <code>Bignum</code>에서 NOT 연산을 하기 위해 만들어진 연산자입니다.</p> <div class="language-ruby extra-class"><pre class="language-ruby"><code><span class="token operator">~</span><span class="token number">1</span> <span class="token comment"># =&gt; -2</span>
<span class="token operator">~</span><span class="token number">2</span> <span class="token comment"># =&gt; -3</span>
<span class="token operator">~</span><span class="token number">3</span> <span class="token comment"># =&gt; -4</span>
<span class="token operator">~</span><span class="token number">7</span> <span class="token comment"># =&gt; -8</span>

<span class="token number">1.</span>to_s<span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span> <span class="token comment"># =&gt; &quot;1&quot;</span>
<span class="token number">2.</span>to_s<span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span> <span class="token comment"># =&gt; &quot;10&quot;</span>
<span class="token number">3.</span>to_s<span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span> <span class="token comment"># =&gt; &quot;11&quot;</span>
<span class="token number">7.</span>to_s<span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span> <span class="token comment"># =&gt; &quot;111&quot;</span>

<span class="token punctuation">(</span><span class="token operator">~</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">.</span>to_s<span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span> <span class="token comment"># =&gt; &quot;-10&quot;</span>
<span class="token punctuation">(</span><span class="token operator">~</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">.</span>to_s<span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span> <span class="token comment"># =&gt; &quot;-11&quot;</span>
<span class="token punctuation">(</span><span class="token operator">~</span><span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">.</span>to_s<span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span> <span class="token comment"># =&gt; &quot;-100&quot;</span>
<span class="token punctuation">(</span><span class="token operator">~</span><span class="token number">7</span><span class="token punctuation">)</span><span class="token punctuation">.</span>to_s<span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span> <span class="token comment"># =&gt; &quot;-1000&quot;</span>
</code></pre></div><p><code>Regexp</code>에도 정의되어있습니다. 이 메소드는 gets에서 입력을 받아 <code>$_</code>와 패턴 매치를 하기위해 사용됩니다.</p> <div class="language-ruby extra-class"><pre class="language-ruby"><code><span class="token variable">$_</span> <span class="token operator">=</span> <span class="token string-literal"><span class="token string">'Ruby is a dynamic, open source programming language with a focus on simplicity and productivity.'</span></span>

pos <span class="token operator">=</span> <span class="token operator">~</span> <span class="token regex-literal"><span class="token regex">/\w{8,}/</span></span>
puts <span class="token string-literal"><span class="token string">&quot;8+long-word `</span><span class="token interpolation"><span class="token delimiter punctuation">#{</span><span class="token content">$<span class="token operator">&amp;</span></span><span class="token delimiter punctuation">}</span></span><span class="token string">` appeared at </span><span class="token interpolation"><span class="token delimiter punctuation">#{</span><span class="token content">pos</span><span class="token delimiter punctuation">}</span></span><span class="token string">&quot;</span></span>

<span class="token comment"># &gt;&gt; 8+long-word `programming` appeared at 31</span>
</code></pre></div><p>단항연산자의 특이한 점은 리시버가 메소드 뒤에 오는 점입니다. 이런
특징을 활용해 편리한 메소드들을 잔뜩 정의해서 써야만 하겠죠. 연산 우선 순위도 높아 메소드 체인에서도 문제 없이 사용할 수 있습니다.</p> <div class="language-ruby extra-class"><pre class="language-ruby"><code><span class="token keyword">class</span> <span class="token class-name">String</span>
  <span class="token keyword">def</span> <span class="token operator">~</span>
    reverse
  <span class="token keyword">end</span>
<span class="token keyword">end</span>

<span class="token keyword">class</span> <span class="token class-name">Symbol</span>
  <span class="token keyword">def</span> <span class="token operator">~</span>
    swapcase
  <span class="token keyword">end</span>
<span class="token keyword">end</span>

<span class="token keyword">class</span> <span class="token class-name">Array</span>
  <span class="token keyword">def</span> <span class="token operator">~</span>
    reverse
  <span class="token keyword">end</span>
<span class="token keyword">end</span>

<span class="token keyword">class</span> <span class="token class-name">Hash</span>
  <span class="token keyword">def</span> <span class="token operator">~</span>
    invert
  <span class="token keyword">end</span>
<span class="token keyword">end</span>

<span class="token operator">~</span><span class="token string-literal"><span class="token string">'よるなくたにし なんてしつけいい'</span></span> <span class="token comment"># =&gt; &quot;いいけつしてんな しにたくなるよ&quot;</span>

s <span class="token operator">=</span> <span class="token string-literal"><span class="token string">'godtoh'</span></span>
<span class="token operator">~</span>s<span class="token punctuation">.</span>swapcase <span class="token comment"># =&gt; &quot;HOTDOG&quot;</span>

<span class="token operator">~</span><span class="token symbol">:Hello</span> <span class="token comment"># =&gt; :hELLO</span>

<span class="token operator">~</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token number">3</span><span class="token punctuation">,</span><span class="token number">4</span><span class="token punctuation">]</span> <span class="token comment"># =&gt; [4, 3, 2, 1]</span>

<span class="token operator">~</span><span class="token punctuation">{</span><span class="token symbol">ruby</span><span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token symbol">lisp</span><span class="token operator">:</span> <span class="token number">2</span><span class="token punctuation">}</span> <span class="token comment"># =&gt; {1=&gt;:ruby, 2=&gt;:lisp}</span>
</code></pre></div><p>뭐 확실히 <code>~</code>만으론 메소드의 의도를 파악하기 힘듭니다만...</p> <h2 id="_54-멀티-바이트-메소드"><a href="#_54-멀티-바이트-메소드" class="header-anchor">#</a> 54. 멀티 바이트 메소드</h2> <p>1.9부터 메소드 이름에 멀티 바이트 문자를 사용할 수 있는데 실제 활용
사례는 별로 없습니다. 이래서는 Ruby가 불쌍해지니 이러한 방법을 포교해보죠.</p> <div class="language-ruby extra-class"><pre class="language-ruby"><code><span class="token keyword">class</span> <span class="token class-name">String</span>
  <span class="token keyword">def</span> ©<span class="token punctuation">(</span>name<span class="token operator">=</span><span class="token string-literal"><span class="token string">'anonymous'</span></span><span class="token punctuation">)</span>
    <span class="token keyword">self</span> <span class="token operator">+</span> <span class="token string-literal"><span class="token string">&quot; - Copyright © </span><span class="token interpolation"><span class="token delimiter punctuation">#{</span><span class="token content">name</span><span class="token delimiter punctuation">}</span></span><span class="token string"> </span><span class="token interpolation"><span class="token delimiter punctuation">#{</span><span class="token content"><span class="token builtin">Time</span><span class="token punctuation">.</span>now<span class="token punctuation">.</span>year</span><span class="token delimiter punctuation">}</span></span><span class="token string"> All rights reserved. -&quot;</span></span>
  <span class="token keyword">end</span>

  <span class="token keyword">def</span> 
    <span class="token keyword">self</span> <span class="token operator">+</span> <span class="token string-literal"><span class="token string">' - Designed by Apple in California -'</span></span>
  <span class="token keyword">end</span>
<span class="token keyword">end</span>

<span class="token string-literal"><span class="token string">'this is my work'</span></span><span class="token punctuation">.</span>©<span class="token punctuation">(</span><span class="token symbol">:Charlie</span><span class="token punctuation">)</span> <span class="token comment"># =&gt; &quot;this is my work - Copyright © Charlie 2012 All rights reserved. -&quot;</span>

poetry <span class="token operator">=</span> <span class="token operator">&lt;&lt;</span><span class="token constant">EOS</span>
Ruby is <span class="token keyword">not</span> a Gem
Gem is <span class="token keyword">not</span> a Jam
Jam is <span class="token keyword">not</span> a Jelly
Jam is about Traffic
Gem is about Library
Ruby is about Language<span class="token operator">!</span><span class="token constant">EOS</span>

puts poetry<span class="token punctuation">.</span>©

<span class="token comment"># &gt;&gt; Ruby is not a Gem</span>
<span class="token comment"># &gt;&gt; Gem is not a Jam</span>
<span class="token comment"># &gt;&gt; Jam is not a Jelly</span>
<span class="token comment"># &gt;&gt; Jam is about Traffic</span>
<span class="token comment"># &gt;&gt; Gem is about Library</span>
<span class="token comment"># &gt;&gt; Ruby is about Language!# &gt;&gt;  - Copyright © anonymous 2012 All rights reserved. -</span>

<span class="token string-literal"><span class="token string">'hello, apple'</span></span><span class="token punctuation">.</span> <span class="token comment"># =&gt; &quot;hello, apple - Designed by Apple in California -&quot;</span>
</code></pre></div><p><code></code>는 Mac keyboard에서 <code>~$k</code>(Option+Shift+k)를 누르면 나옵니다. (역주:
이 기호는 애플 상표 기호로, Mac에서만 제대로 나옵니다.)</p> <p><code>Numeric</code>에는 화폐 메소드를 추가해보죠. 여기서는 <code>def method</code>를 사용해 일일히 클래스를 다시 여는 번거로움을 줄여보겠습니다.</p> <div class="language-ruby extra-class"><pre class="language-ruby"><code><span class="token keyword">def</span> <span class="token method-definition"><span class="token function">def_method</span></span><span class="token punctuation">(</span>name<span class="token punctuation">,</span> klass<span class="token operator">=</span><span class="token keyword">self</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">,</span> <span class="token operator">&amp;</span>body<span class="token punctuation">)</span>
  blk <span class="token operator">=</span> block_given<span class="token operator">?</span><span class="token operator">?</span>body <span class="token operator">:</span> <span class="token operator">-</span><span class="token operator">&gt;</span><span class="token punctuation">{</span> <span class="token string-literal"><span class="token string">&quot;</span><span class="token interpolation"><span class="token delimiter punctuation">#{</span><span class="token content">name</span><span class="token delimiter punctuation">}</span></span><span class="token string">: not implemented yet.&quot;</span></span> <span class="token punctuation">}</span>
  klass<span class="token punctuation">.</span>class_eval <span class="token punctuation">{</span> <span class="token keyword">define_method</span><span class="token punctuation">(</span><span class="token string-literal"><span class="token string">&quot;</span><span class="token interpolation"><span class="token delimiter punctuation">#{</span><span class="token content">name</span><span class="token delimiter punctuation">}</span></span><span class="token string">&quot;</span></span><span class="token punctuation">,</span> blk<span class="token punctuation">)</span> <span class="token punctuation">}</span>
<span class="token keyword">end</span>

currencies <span class="token operator">=</span> <span class="token string-literal"><span class="token string">%w(¥ € £ $)</span></span><span class="token punctuation">.</span>zip <span class="token punctuation">[</span><span class="token symbol">:JPY</span><span class="token punctuation">,</span> <span class="token symbol">:EUR</span><span class="token punctuation">,</span> <span class="token symbol">:GBP</span><span class="token punctuation">,</span> <span class="token symbol">:USD</span><span class="token punctuation">]</span>
currencies<span class="token punctuation">.</span><span class="token keyword">each</span> <span class="token keyword">do</span> <span class="token operator">|</span>cur<span class="token punctuation">,</span> sym<span class="token operator">|</span>
  def_method<span class="token punctuation">(</span>cur<span class="token punctuation">,</span> <span class="token builtin">Numeric</span><span class="token punctuation">)</span> <span class="token keyword">do</span>
    int<span class="token punctuation">,</span> dec <span class="token operator">=</span> Exchange<span class="token punctuation">(</span><span class="token keyword">self</span><span class="token punctuation">,</span> sym<span class="token punctuation">)</span><span class="token punctuation">.</span>to_s<span class="token punctuation">.</span>split<span class="token punctuation">(</span><span class="token string-literal"><span class="token string">'.'</span></span><span class="token punctuation">)</span>
    dec <span class="token operator">=</span> dec <span class="token operator">?</span><span class="token string-literal"><span class="token string">&quot;.</span><span class="token interpolation"><span class="token delimiter punctuation">#{</span><span class="token content">dec<span class="token punctuation">[</span><span class="token operator">/</span><span class="token punctuation">.</span><span class="token punctuation">{</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">}</span><span class="token operator">/</span><span class="token punctuation">]</span></span><span class="token delimiter punctuation">}</span></span><span class="token string">&quot;</span></span> <span class="token operator">:</span> <span class="token string-literal"><span class="token string">''</span></span>
    cur <span class="token operator">+</span> int<span class="token punctuation">.</span>reverse<span class="token punctuation">.</span>scan<span class="token punctuation">(</span><span class="token regex-literal"><span class="token regex">/.{1,3}/</span></span><span class="token punctuation">)</span><span class="token punctuation">.</span>join<span class="token punctuation">(</span><span class="token string-literal"><span class="token string">','</span></span><span class="token punctuation">)</span><span class="token punctuation">.</span>reverse <span class="token operator">+</span> dec
  <span class="token keyword">end</span>
<span class="token keyword">end</span>

<span class="token keyword">def</span> <span class="token method-definition"><span class="token function">Exchange</span></span><span class="token punctuation">(</span>num<span class="token punctuation">,</span> _for_<span class="token punctuation">)</span>
  num <span class="token operator">*</span> <span class="token punctuation">{</span><span class="token symbol">USD</span><span class="token operator">:</span><span class="token number">1.0</span><span class="token punctuation">,</span> <span class="token symbol">JPY</span><span class="token operator">:</span><span class="token number">81.3</span><span class="token punctuation">,</span> <span class="token symbol">EUR</span><span class="token operator">:</span><span class="token number">0.76</span><span class="token punctuation">,</span> <span class="token symbol">GBP</span><span class="token operator">:</span><span class="token number">0.62</span><span class="token punctuation">}</span><span class="token punctuation">[</span>_for_<span class="token punctuation">]</span>
<span class="token keyword">end</span>

<span class="token number">123.45</span><span class="token punctuation">.</span>¥ <span class="token comment"># =&gt; &quot;¥10,036.48&quot;</span>
<span class="token number">1000000.</span>¥ <span class="token comment"># =&gt; &quot;¥81,300,000.0&quot;</span>
<span class="token number">123.</span>€ <span class="token comment"># =&gt; &quot;€93.48&quot;</span>
<span class="token number">1000000.</span>€ <span class="token comment"># =&gt; &quot;€760,000.0&quot;</span>
<span class="token number">123.45</span><span class="token punctuation">.</span>£ <span class="token comment"># =&gt; &quot;£76.53&quot;</span>
<span class="token number">1000000.</span>£ <span class="token comment"># =&gt; &quot;£620,000.0&quot;</span>
</code></pre></div><p>뭐 입력이 좀 힘들긴 합니다만..</p> <h2 id="_55-비밀-메소드"><a href="#_55-비밀-메소드" class="header-anchor">#</a> 55. 비밀 메소드</h2> <p>위의 예처럼 Ruby에서는 키워드나 기호를 메소드 이름에 사용할 수
있습니다만 사용하지 못 하는 것도 있습니다. 예를 들어, <code>.</code>, <code>,</code>, <code>@</code>, <code>=</code>, <code>(</code>, <code>#</code>, <code>$</code> 는 메소드 이름에서 사용할 수 없습니다.</p> <div class="language-ruby extra-class"><pre class="language-ruby"><code><span class="token keyword">def</span> <span class="token punctuation">.</span>
<span class="token keyword">end</span>
<span class="token comment"># ~&gt; -:1: syntax error, unexpected '.'</span>

<span class="token keyword">def</span> <span class="token punctuation">,</span>
<span class="token keyword">end</span>
<span class="token comment"># ~&gt; -:1: syntax error, unexpected ','</span>

<span class="token keyword">def</span> @
<span class="token keyword">end</span>
<span class="token comment"># ~&gt; -:1: syntax error, unexpected $undefined</span>

<span class="token keyword">def</span> <span class="token operator">=</span>
<span class="token keyword">end</span>
<span class="token comment"># ~&gt; -:1: syntax error, unexpected '='</span>

<span class="token keyword">def</span> <span class="token punctuation">(</span>
<span class="token keyword">end</span>
<span class="token comment"># ~&gt; -:2: syntax error, unexpected keyword_end</span>

<span class="token keyword">def</span> <span class="token comment">#</span>
<span class="token keyword">end</span>
<span class="token comment"># ~&gt; -:4: syntax error, unexpected $end</span>

<span class="token keyword">def</span> $
<span class="token keyword">end</span>
<span class="token comment"># ~&gt; -:1: syntax error, unexpected $undefined</span>
</code></pre></div><p>보통은 여기서 납득하고 넘어가겠죠. 하지만 <code>define_method</code>를 사용하면 이러한
기호들도 메소드 이름으로 사용할 수 있습니다. 먼저 def_method를 사용해 이런 메소드를 정의해보죠.</p> <div class="language-ruby extra-class"><pre class="language-ruby"><code><span class="token keyword">def</span> <span class="token method-definition"><span class="token function">def_method</span></span><span class="token punctuation">(</span>name<span class="token punctuation">,</span> klass<span class="token operator">=</span><span class="token keyword">self</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">,</span> <span class="token operator">&amp;</span>body<span class="token punctuation">)</span>
  blk <span class="token operator">=</span> block_given<span class="token operator">?</span><span class="token operator">?</span>body <span class="token operator">:</span> <span class="token operator">-</span><span class="token operator">&gt;</span><span class="token punctuation">{</span> <span class="token string-literal"><span class="token string">&quot;</span><span class="token interpolation"><span class="token delimiter punctuation">#{</span><span class="token content">name</span><span class="token delimiter punctuation">}</span></span><span class="token string">: not implemented yet.&quot;</span></span> <span class="token punctuation">}</span>
  klass<span class="token punctuation">.</span>class_eval <span class="token punctuation">{</span> <span class="token keyword">define_method</span><span class="token punctuation">(</span><span class="token string-literal"><span class="token string">&quot;</span><span class="token interpolation"><span class="token delimiter punctuation">#{</span><span class="token content">name</span><span class="token delimiter punctuation">}</span></span><span class="token string">&quot;</span></span><span class="token punctuation">,</span> blk<span class="token punctuation">)</span> <span class="token punctuation">}</span>
<span class="token keyword">end</span>

<span class="token keyword">class</span> <span class="token class-name">Trivia</span>

<span class="token keyword">end</span>

methods <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token string-literal"><span class="token string">&quot;.&quot;</span></span><span class="token punctuation">,</span> <span class="token string-literal"><span class="token string">&quot;,&quot;</span></span><span class="token punctuation">,</span> <span class="token string-literal"><span class="token string">&quot;@&quot;</span></span><span class="token punctuation">,</span> <span class="token string-literal"><span class="token string">&quot;=&quot;</span></span><span class="token punctuation">,</span> <span class="token string-literal"><span class="token string">&quot;(&quot;</span></span><span class="token punctuation">,</span> <span class="token string-literal"><span class="token string">&quot;#&quot;</span></span><span class="token punctuation">,</span> <span class="token string-literal"><span class="token string">&quot;$&quot;</span></span><span class="token punctuation">]</span>
methods<span class="token punctuation">.</span><span class="token keyword">each</span> <span class="token punctuation">{</span> <span class="token operator">|</span>meth<span class="token operator">|</span> def_method meth<span class="token punctuation">,</span> Trivia <span class="token punctuation">}</span>

Trivia<span class="token punctuation">.</span>public_instance_methods<span class="token punctuation">(</span><span class="token boolean">false</span><span class="token punctuation">)</span> <span class="token comment"># =&gt; [:&quot;.&quot;, :&quot;,&quot;, :&quot;@&quot;, :&quot;=&quot;, :&quot;(&quot;, :&quot;#&quot;, :&quot;$&quot;]</span>
</code></pre></div><p>되죠?</p> <p>하지만 이 메소드들에는 치명적인 단점이 하나 있습니다.</p> <p>그건...</p> <p>호출이 불가능하는 겁니다! ^^;</p> <div class="language-ruby extra-class"><pre class="language-ruby"><code>t <span class="token operator">=</span> <span class="token class-name">Trivia</span><span class="token punctuation">.</span><span class="token keyword">new</span>

t<span class="token operator">..</span> <span class="token comment"># =&gt;</span>
t<span class="token punctuation">.</span><span class="token punctuation">,</span> <span class="token comment"># =&gt;</span>
t<span class="token punctuation">.</span>@ <span class="token comment"># =&gt;</span>
t<span class="token punctuation">.</span><span class="token operator">=</span> <span class="token comment"># =&gt;</span>
t<span class="token punctuation">.</span><span class="token punctuation">(</span> <span class="token comment"># =&gt;</span>
t<span class="token punctuation">.</span><span class="token comment"># # =&gt;</span>
t<span class="token punctuation">.</span>$ <span class="token comment"># =&gt;</span>

<span class="token comment"># ~&gt; -:42: syntax error, unexpected ')'</span>
<span class="token comment"># ~&gt; ...1335430361_15646_549583 = (t..);$stderr.puts(&quot;!XMP1335430361...</span>
<span class="token comment"># ~&gt; ...                               ^</span>
<span class="token comment"># ~&gt; -:43: syntax error, unexpected ','</span>
<span class="token comment"># ~&gt; ..._1335430361_15646_549583 = (t.,);$stderr.puts(&quot;!XMP133543036...</span>
<span class="token comment"># ~&gt; ...                               ^</span>
<span class="token comment"># ~&gt; -:44: syntax error, unexpected $undefined</span>
<span class="token comment"># ~&gt; ..._1335430361_15646_549583 = (t.@);$stderr.puts(&quot;!XMP133543036...</span>
<span class="token comment"># ~&gt; ...                               ^</span>
<span class="token comment"># ~&gt; -:45: syntax error, unexpected '='</span>
<span class="token comment"># ~&gt; ..._1335430361_15646_549583 = (t.=);$stderr.puts(&quot;!XMP133543036...</span>
<span class="token comment"># ~&gt; ...                               ^</span>
<span class="token comment"># ~&gt; -:48: syntax error, unexpected $undefined</span>
<span class="token comment"># ~&gt; ..._1335430361_15646_549583 = (t.$);$stderr.puts(&quot;!XMP133543036...</span>
<span class="token comment"># ~&gt; ...                               ^</span>
<span class="token comment"># ~&gt; -:65: syntax error, unexpected $end, expecting ')'</span>
</code></pre></div><p>단 <code>Object#send</code>나 <code>Method#call</code> 메소드를 사용해 호출하는 건 가능한데 귀찮습니다.</p> <div class="language-ruby extra-class"><pre class="language-ruby"><code>t <span class="token operator">=</span> <span class="token class-name">Trivia</span><span class="token punctuation">.</span><span class="token keyword">new</span>

t<span class="token punctuation">.</span>send <span class="token string-literal"><span class="token string">'.'</span></span> <span class="token comment"># =&gt; &quot;.: not implemented yet.&quot;</span>
t<span class="token punctuation">.</span>method<span class="token punctuation">(</span><span class="token string-literal"><span class="token string">','</span></span><span class="token punctuation">)</span><span class="token punctuation">.</span>call <span class="token comment"># =&gt; &quot;,: not implemented yet.&quot;</span>

def_method<span class="token punctuation">(</span><span class="token string-literal"><span class="token string">'@'</span></span><span class="token punctuation">,</span> Trivia<span class="token punctuation">)</span> <span class="token keyword">do</span> <span class="token operator">|</span>num<span class="token operator">|</span>
  <span class="token string-literal"><span class="token string">&quot;</span><span class="token interpolation"><span class="token delimiter punctuation">#{</span><span class="token content"><span class="token keyword">self</span><span class="token punctuation">.</span><span class="token keyword">class</span></span><span class="token delimiter punctuation">}</span></span><span class="token string">&quot;</span></span><span class="token punctuation">.</span>center<span class="token punctuation">(</span>num<span class="token punctuation">,</span> <span class="token string-literal"><span class="token string">'@'</span></span><span class="token punctuation">)</span>
<span class="token keyword">end</span>

def_method<span class="token punctuation">(</span><span class="token string-literal"><span class="token string">'('</span></span><span class="token punctuation">,</span> Trivia<span class="token punctuation">)</span> <span class="token keyword">do</span> <span class="token operator">|</span>str<span class="token operator">|</span>
  <span class="token string-literal"><span class="token string">&quot;( </span><span class="token interpolation"><span class="token delimiter punctuation">#{</span><span class="token content">str</span><span class="token delimiter punctuation">}</span></span><span class="token string"> )&quot;</span></span>
<span class="token keyword">end</span>

t<span class="token punctuation">.</span>send <span class="token string-literal"><span class="token string">'@'</span></span><span class="token punctuation">,</span> <span class="token number">12</span> <span class="token comment"># =&gt; &quot;@@@Trivia@@@&quot;</span>
t<span class="token punctuation">.</span>send <span class="token string-literal"><span class="token string">'('</span></span><span class="token punctuation">,</span> <span class="token string-literal"><span class="token string">'I love Ruby'</span></span>  <span class="token comment"># =&gt; &quot;( I love Ruby )&quot;</span>
</code></pre></div><p>즉 이러한 기호들을 사용한 메소드는 일반적인 방법으로는 정의하거나
호출하는 게 불가능하지만, 일반적이지 않은 특별한 방법을 사용하면
정의할 수도 있고 호출할 수도 있는 특수한 메소드들이라고 할 수
있습니다. 저는 이러한 메소드들을 특수한 방법으로 숨겨진 메소드, 즉
<code>비밀(hidden)</code> 메소드라고 이름 붙였습니다. 어디에 사용할 지는... 저도 잘 모르겠습니다..</p> <p>이상으로 Ruby 55가지 기법을 설명했습니다. 새로운 발견은 있으셨나요?</p> <p>(추신：2013-03-31)@no6v 님 이름이 @no6v1 님으로 되어있었습니다. 수정했습니다. 죄송합니다.</p> <hr> <a href="/books/"><img src="http://melborne.github.io/assets/images/2013/03/ruby_trivia_cover.png" alt="trivia" style="width:200px;"></a> <p><a href="http://gum.co/owIqH" class="gumroad-button">E-Book 알아두면 도움이 되는 55가지 루비 기법 EPUB/MOBI판</a><script type="text/javascript" src="https://gumroad.com/js/gumroad-button.js"></script><script type="text/javascript" src="https://gumroad.com/js/gumroad.js"></script></p> <p>이 링크는 Gumroad의 상품 구매 페이지입니다. 클릭하면 오버레이 윈도우가
뜨고 여기서 카드 정보를 입력하면 구입이 가능합니다. 구입을 하려면 카드
정보와 이메일 주소를 입력해야합니다. 구입이 정상적으로 완료되면 입력한 이메일로 다운로드 가능한 링크가 보내집니다.</p> <p><a href="https://gist.github.com/nacyot/7624036" target="_blank" rel="noopener noreferrer">원본<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p></div> <footer class="page-edit"><!----> <!----></footer> <!----> </main></div><div class="global-ui"></div></div>
    <script src="/assets/js/app.4a348df6.js" defer></script><script src="/assets/js/8.f8a27090.js" defer></script><script src="/assets/js/71.8cf0b0df.js" defer></script>
  </body>
</html>
